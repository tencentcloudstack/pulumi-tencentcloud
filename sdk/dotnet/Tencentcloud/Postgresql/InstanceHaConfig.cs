// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;
using Pulumi;

namespace TencentCloudIAC.PulumiPackage.Tencentcloud.Postgresql
{
    /// <summary>
    /// Provides a resource to set postgresql instance syncMode
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Tencentcloud = TencentCloudIAC.PulumiPackage.Tencentcloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var example = new Tencentcloud.Postgresql.InstanceHaConfig("example", new()
    ///     {
    ///         InstanceId = "postgres-gzg9jb2n",
    ///         SyncMode = "Semi-sync",
    ///         MaxStandbyLatency = 10737418240,
    ///         MaxStandbyLag = 10,
    ///         MaxSyncStandbyLatency = 52428800,
    ///         MaxSyncStandbyLag = 5,
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Tencentcloud = TencentCloudIAC.PulumiPackage.Tencentcloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var example = new Tencentcloud.Postgresql.InstanceHaConfig("example", new()
    ///     {
    ///         InstanceId = "postgres-gzg9jb2n",
    ///         SyncMode = "Async",
    ///         MaxStandbyLatency = 10737418240,
    ///         MaxStandbyLag = 10,
    ///     });
    /// 
    /// });
    /// ```
    /// </summary>
    [TencentcloudResourceType("tencentcloud:Postgresql/instanceHaConfig:InstanceHaConfig")]
    public partial class InstanceHaConfig : global::Pulumi.CustomResource
    {
        /// <summary>
        /// instance id.
        /// </summary>
        [Output("instanceId")]
        public Output<string> InstanceId { get; private set; } = null!;

        /// <summary>
        /// Maximum latency of highly available backup machines. When the delay time of the backup node is less than or equal to this value, and the amount of delay data of the backup node is less than or equal to MaxStandbyLatency, the primary node can be switched. Unit: s; Parameter range: [5, 10].
        /// </summary>
        [Output("maxStandbyLag")]
        public Output<int> MaxStandbyLag { get; private set; } = null!;

        /// <summary>
        /// Maximum latency data volume for highly available backup machines. When the delay data amount of the backup node is less than or equal to this value, and the delay time of the backup node is less than or equal to MaxStandbyLag, it can switch to the main node. Unit: byte; Parameter range: [1073741824, 322122547200].
        /// </summary>
        [Output("maxStandbyLatency")]
        public Output<int> MaxStandbyLatency { get; private set; } = null!;

        /// <summary>
        /// Maximum delay time for synchronous backup. When the delay time of the standby machine is less than or equal to this value, and the amount of delay data of the standby machine is less than or equal to MaxSyncStandbyLatency, then the standby machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Output("maxSyncStandbyLag")]
        public Output<int?> MaxSyncStandbyLag { get; private set; } = null!;

        /// <summary>
        /// Maximum latency data for synchronous backup. When the amount of data delayed by the backup machine is less than or equal to this value, and the delay time of the backup machine is less than or equal to MaxSyncStandbyLag, then the backup machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Output("maxSyncStandbyLatency")]
        public Output<int?> MaxSyncStandbyLatency { get; private set; } = null!;

        /// <summary>
        /// Master slave synchronization method, Semi-sync: Semi synchronous; Async: Asynchronous. Main instance default value: Semi-sync, Read-only instance default value: Async.
        /// </summary>
        [Output("syncMode")]
        public Output<string> SyncMode { get; private set; } = null!;


        /// <summary>
        /// Create a InstanceHaConfig resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public InstanceHaConfig(string name, InstanceHaConfigArgs args, CustomResourceOptions? options = null)
            : base("tencentcloud:Postgresql/instanceHaConfig:InstanceHaConfig", name, args ?? new InstanceHaConfigArgs(), MakeResourceOptions(options, ""))
        {
        }

        private InstanceHaConfig(string name, Input<string> id, InstanceHaConfigState? state = null, CustomResourceOptions? options = null)
            : base("tencentcloud:Postgresql/instanceHaConfig:InstanceHaConfig", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                PluginDownloadURL = "github://api.github.com/tencentcloudstack",
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing InstanceHaConfig resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static InstanceHaConfig Get(string name, Input<string> id, InstanceHaConfigState? state = null, CustomResourceOptions? options = null)
        {
            return new InstanceHaConfig(name, id, state, options);
        }
    }

    public sealed class InstanceHaConfigArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// instance id.
        /// </summary>
        [Input("instanceId", required: true)]
        public Input<string> InstanceId { get; set; } = null!;

        /// <summary>
        /// Maximum latency of highly available backup machines. When the delay time of the backup node is less than or equal to this value, and the amount of delay data of the backup node is less than or equal to MaxStandbyLatency, the primary node can be switched. Unit: s; Parameter range: [5, 10].
        /// </summary>
        [Input("maxStandbyLag", required: true)]
        public Input<int> MaxStandbyLag { get; set; } = null!;

        /// <summary>
        /// Maximum latency data volume for highly available backup machines. When the delay data amount of the backup node is less than or equal to this value, and the delay time of the backup node is less than or equal to MaxStandbyLag, it can switch to the main node. Unit: byte; Parameter range: [1073741824, 322122547200].
        /// </summary>
        [Input("maxStandbyLatency", required: true)]
        public Input<int> MaxStandbyLatency { get; set; } = null!;

        /// <summary>
        /// Maximum delay time for synchronous backup. When the delay time of the standby machine is less than or equal to this value, and the amount of delay data of the standby machine is less than or equal to MaxSyncStandbyLatency, then the standby machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Input("maxSyncStandbyLag")]
        public Input<int>? MaxSyncStandbyLag { get; set; }

        /// <summary>
        /// Maximum latency data for synchronous backup. When the amount of data delayed by the backup machine is less than or equal to this value, and the delay time of the backup machine is less than or equal to MaxSyncStandbyLag, then the backup machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Input("maxSyncStandbyLatency")]
        public Input<int>? MaxSyncStandbyLatency { get; set; }

        /// <summary>
        /// Master slave synchronization method, Semi-sync: Semi synchronous; Async: Asynchronous. Main instance default value: Semi-sync, Read-only instance default value: Async.
        /// </summary>
        [Input("syncMode", required: true)]
        public Input<string> SyncMode { get; set; } = null!;

        public InstanceHaConfigArgs()
        {
        }
        public static new InstanceHaConfigArgs Empty => new InstanceHaConfigArgs();
    }

    public sealed class InstanceHaConfigState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// instance id.
        /// </summary>
        [Input("instanceId")]
        public Input<string>? InstanceId { get; set; }

        /// <summary>
        /// Maximum latency of highly available backup machines. When the delay time of the backup node is less than or equal to this value, and the amount of delay data of the backup node is less than or equal to MaxStandbyLatency, the primary node can be switched. Unit: s; Parameter range: [5, 10].
        /// </summary>
        [Input("maxStandbyLag")]
        public Input<int>? MaxStandbyLag { get; set; }

        /// <summary>
        /// Maximum latency data volume for highly available backup machines. When the delay data amount of the backup node is less than or equal to this value, and the delay time of the backup node is less than or equal to MaxStandbyLag, it can switch to the main node. Unit: byte; Parameter range: [1073741824, 322122547200].
        /// </summary>
        [Input("maxStandbyLatency")]
        public Input<int>? MaxStandbyLatency { get; set; }

        /// <summary>
        /// Maximum delay time for synchronous backup. When the delay time of the standby machine is less than or equal to this value, and the amount of delay data of the standby machine is less than or equal to MaxSyncStandbyLatency, then the standby machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Input("maxSyncStandbyLag")]
        public Input<int>? MaxSyncStandbyLag { get; set; }

        /// <summary>
        /// Maximum latency data for synchronous backup. When the amount of data delayed by the backup machine is less than or equal to this value, and the delay time of the backup machine is less than or equal to MaxSyncStandbyLag, then the backup machine adopts synchronous replication; Otherwise, adopt asynchronous replication. This parameter value is valid for instances where SyncMode is set to Semi sync. When a semi synchronous instance prohibits degradation to asynchronous replication, MaxSyncStandbyLatency and MaxSyncStandbyLag are not set. When semi synchronous instances allow degenerate asynchronous replication, PostgreSQL version 9 instances must have MaxSyncStandbyLatency set and MaxSyncStandbyLag not set, while PostgreSQL version 10 and above instances must have MaxSyncStandbyLatency and MaxSyncStandbyLag set.
        /// </summary>
        [Input("maxSyncStandbyLatency")]
        public Input<int>? MaxSyncStandbyLatency { get; set; }

        /// <summary>
        /// Master slave synchronization method, Semi-sync: Semi synchronous; Async: Asynchronous. Main instance default value: Semi-sync, Read-only instance default value: Async.
        /// </summary>
        [Input("syncMode")]
        public Input<string>? SyncMode { get; set; }

        public InstanceHaConfigState()
        {
        }
        public static new InstanceHaConfigState Empty => new InstanceHaConfigState();
    }
}
