// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * Provides a resource to create a Clickhouse instance.
 *
 * ## Example Usage
 *
 * ### Create POSTPAID instance
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as std from "@pulumi/std";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const config = new pulumi.Config();
 * const availabilityZone = config.get("availabilityZone") || "ap-guangzhou-6";
 * const spec = tencentcloud.Clickhouse.getSpec({
 *     zone: availabilityZone,
 *     payMode: "POSTPAID_BY_HOUR",
 *     isElastic: false,
 * });
 * const dataSpec = Promise.all([spec, std.lookup({
 *     map: i,
 *     key: "cpu",
 * }), std.lookup({
 *     map: i,
 *     key: "mem",
 * })]).then(([spec, invoke, invoke1]) => .filter(i => invoke.result == 4 && invoke1.result == 16).map(i => (i)));
 * const dataSpecName4c16m = dataSpec[0].name;
 * const commonSpec = Promise.all([spec, std.lookup({
 *     map: i,
 *     key: "cpu",
 * }), std.lookup({
 *     map: i,
 *     key: "mem",
 * })]).then(([spec, invoke, invoke1]) => .filter(i => invoke.result == 4 && invoke1.result == 16).map(i => (i)));
 * const commonSpecName4c16m = commonSpec[0].name;
 * const vpc = new tencentcloud.vpc.Instance("vpc", {
 *     name: "cdwch-vpc",
 *     cidrBlock: "10.0.0.0/16",
 * });
 * const subnet = new tencentcloud.subnet.Instance("subnet", {
 *     vpcId: vpc.id,
 *     name: "cdwch-subnet",
 *     cidrBlock: "10.0.0.0/16",
 *     availabilityZone: availabilityZone,
 *     isMulticast: false,
 * });
 * const example = new tencentcloud.clickhouse.Instance("example", {
 *     instanceName: "tf-example",
 *     chargeType: "POSTPAID_BY_HOUR",
 *     zone: availabilityZone,
 *     haFlag: true,
 *     vpcId: vpc.id,
 *     subnetId: subnet.id,
 *     productVersion: "21.8.12.29",
 *     ckDefaultUserPwd: "Password@123",
 *     dataSpec: {
 *         specName: dataSpecName4c16m,
 *         count: 2,
 *         diskSize: 300,
 *     },
 *     commonSpec: {
 *         specName: commonSpecName4c16m,
 *         count: 3,
 *         diskSize: 300,
 *     },
 * });
 * ```
 *
 * ### Create PREPAID instance
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as std from "@pulumi/std";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const config = new pulumi.Config();
 * const availabilityZone = config.get("availabilityZone") || "ap-guangzhou-6";
 * const spec = tencentcloud.Clickhouse.getSpec({
 *     zone: availabilityZone,
 *     payMode: "POSTPAID_BY_HOUR",
 *     isElastic: false,
 * });
 * const dataSpec = Promise.all([spec, std.lookup({
 *     map: i,
 *     key: "cpu",
 * }), std.lookup({
 *     map: i,
 *     key: "mem",
 * })]).then(([spec, invoke, invoke1]) => .filter(i => invoke.result == 4 && invoke1.result == 16).map(i => (i)));
 * const dataSpecName4c16m = dataSpec[0].name;
 * const commonSpec = Promise.all([spec, std.lookup({
 *     map: i,
 *     key: "cpu",
 * }), std.lookup({
 *     map: i,
 *     key: "mem",
 * })]).then(([spec, invoke, invoke1]) => .filter(i => invoke.result == 4 && invoke1.result == 16).map(i => (i)));
 * const commonSpecName4c16m = commonSpec[0].name;
 * const vpc = new tencentcloud.vpc.Instance("vpc", {
 *     name: "cdwch-vpc",
 *     cidrBlock: "10.0.0.0/16",
 * });
 * const subnet = new tencentcloud.subnet.Instance("subnet", {
 *     vpcId: vpc.id,
 *     name: "cdwch-subnet",
 *     cidrBlock: "10.0.0.0/16",
 *     availabilityZone: availabilityZone,
 *     isMulticast: false,
 * });
 * const example = new tencentcloud.clickhouse.Instance("example", {
 *     instanceName: "tf-example",
 *     chargeType: "PREPAID",
 *     renewFlag: 1,
 *     timeSpan: 1,
 *     zone: availabilityZone,
 *     haFlag: true,
 *     vpcId: vpc.id,
 *     subnetId: subnet.id,
 *     productVersion: "21.8.12.29",
 *     ckDefaultUserPwd: "Password@123",
 *     dataSpec: {
 *         specName: dataSpecName4c16m,
 *         count: 2,
 *         diskSize: 300,
 *     },
 *     commonSpec: {
 *         specName: commonSpecName4c16m,
 *         count: 3,
 *         diskSize: 300,
 *     },
 * });
 * ```
 *
 * ## Import
 *
 * Clickhouse instance can be imported using the id, e.g.
 *
 * ```sh
 * $ pulumi import tencentcloud:Clickhouse/instance:Instance example cdwch-4l6mm8p7
 * ```
 */
export class Instance extends pulumi.CustomResource {
    /**
     * Get an existing Instance resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: InstanceState, opts?: pulumi.CustomResourceOptions): Instance {
        return new Instance(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'tencentcloud:Clickhouse/instance:Instance';

    /**
     * Returns true if the given object is an instance of Instance.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is Instance {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === Instance.__pulumiType;
    }

    /**
     * access address info.
     */
    declare public /*out*/ readonly accessInfo: pulumi.Output<string>;
    /**
     * Billing type: `PREPAID` prepaid, `POSTPAID_BY_HOUR` postpaid.
     */
    declare public readonly chargeType: pulumi.Output<string>;
    /**
     * The password for the default account to log in to the instance. 8-16 characters, including at least three of the following: uppercase letters, lowercase letters, numbers, and special characters `!@#%^*`. The first character cannot be a special character.
     */
    declare public readonly ckDefaultUserPwd: pulumi.Output<string | undefined>;
    /**
     * CLS log set id.
     */
    declare public readonly clsLogSetId: pulumi.Output<string>;
    /**
     * ZK node.
     */
    declare public readonly commonSpec: pulumi.Output<outputs.Clickhouse.InstanceCommonSpec>;
    /**
     * COS bucket name.
     */
    declare public readonly cosBucketName: pulumi.Output<string>;
    /**
     * Data spec.
     */
    declare public readonly dataSpec: pulumi.Output<outputs.Clickhouse.InstanceDataSpec>;
    /**
     * Expire time.
     */
    declare public /*out*/ readonly expireTime: pulumi.Output<string>;
    /**
     * Whether it is highly available.
     */
    declare public readonly haFlag: pulumi.Output<boolean>;
    /**
     * Whether ZK is highly available.
     */
    declare public readonly haZk: pulumi.Output<boolean>;
    /**
     * Instance name.
     */
    declare public readonly instanceName: pulumi.Output<string>;
    /**
     * Whether it is mounted on a bare disk.
     */
    declare public readonly mountDiskType: pulumi.Output<number>;
    /**
     * Product version.
     */
    declare public readonly productVersion: pulumi.Output<string>;
    /**
     * PREPAID needs to be passed. Whether to renew automatically. 1 means auto renewal is enabled.
     */
    declare public readonly renewFlag: pulumi.Output<number>;
    /**
     * Secondary zone info.
     */
    declare public readonly secondaryZoneInfos: pulumi.Output<outputs.Clickhouse.InstanceSecondaryZoneInfo[]>;
    /**
     * Subnet.
     */
    declare public readonly subnetId: pulumi.Output<string>;
    /**
     * Tag description list.
     */
    declare public readonly tags: pulumi.Output<{[key: string]: string}>;
    /**
     * Prepaid needs to be delivered, billing time length, how many months.
     */
    declare public readonly timeSpan: pulumi.Output<number | undefined>;
    /**
     * Private network.
     */
    declare public readonly vpcId: pulumi.Output<string>;
    /**
     * Availability zone.
     */
    declare public readonly zone: pulumi.Output<string>;

    /**
     * Create a Instance resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: InstanceArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: InstanceArgs | InstanceState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as InstanceState | undefined;
            resourceInputs["accessInfo"] = state?.accessInfo;
            resourceInputs["chargeType"] = state?.chargeType;
            resourceInputs["ckDefaultUserPwd"] = state?.ckDefaultUserPwd;
            resourceInputs["clsLogSetId"] = state?.clsLogSetId;
            resourceInputs["commonSpec"] = state?.commonSpec;
            resourceInputs["cosBucketName"] = state?.cosBucketName;
            resourceInputs["dataSpec"] = state?.dataSpec;
            resourceInputs["expireTime"] = state?.expireTime;
            resourceInputs["haFlag"] = state?.haFlag;
            resourceInputs["haZk"] = state?.haZk;
            resourceInputs["instanceName"] = state?.instanceName;
            resourceInputs["mountDiskType"] = state?.mountDiskType;
            resourceInputs["productVersion"] = state?.productVersion;
            resourceInputs["renewFlag"] = state?.renewFlag;
            resourceInputs["secondaryZoneInfos"] = state?.secondaryZoneInfos;
            resourceInputs["subnetId"] = state?.subnetId;
            resourceInputs["tags"] = state?.tags;
            resourceInputs["timeSpan"] = state?.timeSpan;
            resourceInputs["vpcId"] = state?.vpcId;
            resourceInputs["zone"] = state?.zone;
        } else {
            const args = argsOrState as InstanceArgs | undefined;
            if (args?.chargeType === undefined && !opts.urn) {
                throw new Error("Missing required property 'chargeType'");
            }
            if (args?.dataSpec === undefined && !opts.urn) {
                throw new Error("Missing required property 'dataSpec'");
            }
            if (args?.haFlag === undefined && !opts.urn) {
                throw new Error("Missing required property 'haFlag'");
            }
            if (args?.instanceName === undefined && !opts.urn) {
                throw new Error("Missing required property 'instanceName'");
            }
            if (args?.productVersion === undefined && !opts.urn) {
                throw new Error("Missing required property 'productVersion'");
            }
            if (args?.subnetId === undefined && !opts.urn) {
                throw new Error("Missing required property 'subnetId'");
            }
            if (args?.vpcId === undefined && !opts.urn) {
                throw new Error("Missing required property 'vpcId'");
            }
            if (args?.zone === undefined && !opts.urn) {
                throw new Error("Missing required property 'zone'");
            }
            resourceInputs["chargeType"] = args?.chargeType;
            resourceInputs["ckDefaultUserPwd"] = args?.ckDefaultUserPwd ? pulumi.secret(args.ckDefaultUserPwd) : undefined;
            resourceInputs["clsLogSetId"] = args?.clsLogSetId;
            resourceInputs["commonSpec"] = args?.commonSpec;
            resourceInputs["cosBucketName"] = args?.cosBucketName;
            resourceInputs["dataSpec"] = args?.dataSpec;
            resourceInputs["haFlag"] = args?.haFlag;
            resourceInputs["haZk"] = args?.haZk;
            resourceInputs["instanceName"] = args?.instanceName;
            resourceInputs["mountDiskType"] = args?.mountDiskType;
            resourceInputs["productVersion"] = args?.productVersion;
            resourceInputs["renewFlag"] = args?.renewFlag;
            resourceInputs["secondaryZoneInfos"] = args?.secondaryZoneInfos;
            resourceInputs["subnetId"] = args?.subnetId;
            resourceInputs["tags"] = args?.tags;
            resourceInputs["timeSpan"] = args?.timeSpan;
            resourceInputs["vpcId"] = args?.vpcId;
            resourceInputs["zone"] = args?.zone;
            resourceInputs["accessInfo"] = undefined /*out*/;
            resourceInputs["expireTime"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["ckDefaultUserPwd"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(Instance.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering Instance resources.
 */
export interface InstanceState {
    /**
     * access address info.
     */
    accessInfo?: pulumi.Input<string>;
    /**
     * Billing type: `PREPAID` prepaid, `POSTPAID_BY_HOUR` postpaid.
     */
    chargeType?: pulumi.Input<string>;
    /**
     * The password for the default account to log in to the instance. 8-16 characters, including at least three of the following: uppercase letters, lowercase letters, numbers, and special characters `!@#%^*`. The first character cannot be a special character.
     */
    ckDefaultUserPwd?: pulumi.Input<string>;
    /**
     * CLS log set id.
     */
    clsLogSetId?: pulumi.Input<string>;
    /**
     * ZK node.
     */
    commonSpec?: pulumi.Input<inputs.Clickhouse.InstanceCommonSpec>;
    /**
     * COS bucket name.
     */
    cosBucketName?: pulumi.Input<string>;
    /**
     * Data spec.
     */
    dataSpec?: pulumi.Input<inputs.Clickhouse.InstanceDataSpec>;
    /**
     * Expire time.
     */
    expireTime?: pulumi.Input<string>;
    /**
     * Whether it is highly available.
     */
    haFlag?: pulumi.Input<boolean>;
    /**
     * Whether ZK is highly available.
     */
    haZk?: pulumi.Input<boolean>;
    /**
     * Instance name.
     */
    instanceName?: pulumi.Input<string>;
    /**
     * Whether it is mounted on a bare disk.
     */
    mountDiskType?: pulumi.Input<number>;
    /**
     * Product version.
     */
    productVersion?: pulumi.Input<string>;
    /**
     * PREPAID needs to be passed. Whether to renew automatically. 1 means auto renewal is enabled.
     */
    renewFlag?: pulumi.Input<number>;
    /**
     * Secondary zone info.
     */
    secondaryZoneInfos?: pulumi.Input<pulumi.Input<inputs.Clickhouse.InstanceSecondaryZoneInfo>[]>;
    /**
     * Subnet.
     */
    subnetId?: pulumi.Input<string>;
    /**
     * Tag description list.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * Prepaid needs to be delivered, billing time length, how many months.
     */
    timeSpan?: pulumi.Input<number>;
    /**
     * Private network.
     */
    vpcId?: pulumi.Input<string>;
    /**
     * Availability zone.
     */
    zone?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a Instance resource.
 */
export interface InstanceArgs {
    /**
     * Billing type: `PREPAID` prepaid, `POSTPAID_BY_HOUR` postpaid.
     */
    chargeType: pulumi.Input<string>;
    /**
     * The password for the default account to log in to the instance. 8-16 characters, including at least three of the following: uppercase letters, lowercase letters, numbers, and special characters `!@#%^*`. The first character cannot be a special character.
     */
    ckDefaultUserPwd?: pulumi.Input<string>;
    /**
     * CLS log set id.
     */
    clsLogSetId?: pulumi.Input<string>;
    /**
     * ZK node.
     */
    commonSpec?: pulumi.Input<inputs.Clickhouse.InstanceCommonSpec>;
    /**
     * COS bucket name.
     */
    cosBucketName?: pulumi.Input<string>;
    /**
     * Data spec.
     */
    dataSpec: pulumi.Input<inputs.Clickhouse.InstanceDataSpec>;
    /**
     * Whether it is highly available.
     */
    haFlag: pulumi.Input<boolean>;
    /**
     * Whether ZK is highly available.
     */
    haZk?: pulumi.Input<boolean>;
    /**
     * Instance name.
     */
    instanceName: pulumi.Input<string>;
    /**
     * Whether it is mounted on a bare disk.
     */
    mountDiskType?: pulumi.Input<number>;
    /**
     * Product version.
     */
    productVersion: pulumi.Input<string>;
    /**
     * PREPAID needs to be passed. Whether to renew automatically. 1 means auto renewal is enabled.
     */
    renewFlag?: pulumi.Input<number>;
    /**
     * Secondary zone info.
     */
    secondaryZoneInfos?: pulumi.Input<pulumi.Input<inputs.Clickhouse.InstanceSecondaryZoneInfo>[]>;
    /**
     * Subnet.
     */
    subnetId: pulumi.Input<string>;
    /**
     * Tag description list.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * Prepaid needs to be delivered, billing time length, how many months.
     */
    timeSpan?: pulumi.Input<number>;
    /**
     * Private network.
     */
    vpcId: pulumi.Input<string>;
    /**
     * Availability zone.
     */
    zone: pulumi.Input<string>;
}
