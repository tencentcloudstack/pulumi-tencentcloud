// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "../utilities";

/**
 * Provide a resource to create a KMS external key.
 *
 * ## Example Usage
 *
 * ### Create a basic instance.
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.kms.ExternalKey("example", {
 *     alias: "tf-example-kms-externalkey",
 *     description: "example of kms external key",
 *     tags: {
 *         createdBy: "terraform",
 *     },
 * });
 * ```
 *
 * ### Create kms instance with HSM
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.kms.ExternalKey("example", {
 *     alias: "tf-example-kms-externalkey",
 *     description: "example of kms external key",
 *     hsmClusterId: "cls-hsm-mwpd9cjm",
 *     tags: {
 *         createdBy: "terraform",
 *     },
 * });
 * ```
 *
 * ### Specify the encryption algorithm and public key.
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.kms.ExternalKey("example", {
 *     alias: "tf-example-kms-externalkey",
 *     description: "example of kms external key",
 *     wrappingAlgorithm: "RSAES_PKCS1_V1_5",
 *     keyMaterialBase64: "your_public_key_base64_encoded",
 *     isEnabled: true,
 *     tags: {
 *         createdBy: "terraform",
 *     },
 * });
 * ```
 *
 * ### Disable the external kms key.
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.kms.ExternalKey("example", {
 *     alias: "tf-example-kms-externalkey",
 *     description: "example of kms external key",
 *     wrappingAlgorithm: "RSAES_PKCS1_V1_5",
 *     keyMaterialBase64: "your_public_key_base64_encoded",
 *     isEnabled: false,
 *     tags: {
 *         createdBy: "terraform",
 *     },
 * });
 * ```
 *
 * ## Import
 *
 * KMS external keys can be imported using the id, e.g.
 *
 * ```sh
 * $ pulumi import tencentcloud:Kms/externalKey:ExternalKey example 25068921-2101-11f0-bf1f-5254000328e1
 * ```
 */
export class ExternalKey extends pulumi.CustomResource {
    /**
     * Get an existing ExternalKey resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ExternalKeyState, opts?: pulumi.CustomResourceOptions): ExternalKey {
        return new ExternalKey(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'tencentcloud:Kms/externalKey:ExternalKey';

    /**
     * Returns true if the given object is an instance of ExternalKey.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is ExternalKey {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === ExternalKey.__pulumiType;
    }

    /**
     * Name of CMK. The name can only contain English letters, numbers, underscore and hyphen '-'. The first character must be a letter or number.
     */
    declare public readonly alias: pulumi.Output<string>;
    /**
     * Description of CMK. The maximum is 1024 bytes.
     */
    declare public readonly description: pulumi.Output<string | undefined>;
    /**
     * The HSM cluster ID corresponding to KMS Advanced Edition (only valid for KMS Exclusive/Managed Edition service instances).
     */
    declare public readonly hsmClusterId: pulumi.Output<string | undefined>;
    /**
     * Specify whether to archive key. Default value is `false`. This field is conflict with `isEnabled`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    declare public readonly isArchived: pulumi.Output<boolean | undefined>;
    /**
     * Specify whether to enable key. Default value is `false`. This field is conflict with `isArchived`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    declare public readonly isEnabled: pulumi.Output<boolean | undefined>;
    /**
     * The base64-encoded key material encrypted with the public_key. For regions using the national secret version, the length of the imported key material is required to be 128 bits, and for regions using the FIPS version, the length of the imported key material is required to be 256 bits.
     */
    declare public readonly keyMaterialBase64: pulumi.Output<string | undefined>;
    /**
     * State of CMK.
     */
    declare public /*out*/ readonly keyState: pulumi.Output<string>;
    /**
     * Duration in days after which the key is deleted after destruction of the resource, must be between 7 and 30 days. Defaults to 7 days.
     */
    declare public readonly pendingDeleteWindowInDays: pulumi.Output<number | undefined>;
    /**
     * Tags of CMK.
     */
    declare public readonly tags: pulumi.Output<{[key: string]: string} | undefined>;
    /**
     * This value means the effective timestamp of the key material, 0 means it does not expire. Need to be greater than the current timestamp, the maximum support is 2147443200.
     */
    declare public readonly validTo: pulumi.Output<number | undefined>;
    /**
     * The algorithm for encrypting key material. Available values include `RSAES_PKCS1_V1_5`, `RSAES_OAEP_SHA_1` and `RSAES_OAEP_SHA_256`. Default value is `RSAES_PKCS1_V1_5`.
     */
    declare public readonly wrappingAlgorithm: pulumi.Output<string | undefined>;

    /**
     * Create a ExternalKey resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ExternalKeyArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ExternalKeyArgs | ExternalKeyState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ExternalKeyState | undefined;
            resourceInputs["alias"] = state?.alias;
            resourceInputs["description"] = state?.description;
            resourceInputs["hsmClusterId"] = state?.hsmClusterId;
            resourceInputs["isArchived"] = state?.isArchived;
            resourceInputs["isEnabled"] = state?.isEnabled;
            resourceInputs["keyMaterialBase64"] = state?.keyMaterialBase64;
            resourceInputs["keyState"] = state?.keyState;
            resourceInputs["pendingDeleteWindowInDays"] = state?.pendingDeleteWindowInDays;
            resourceInputs["tags"] = state?.tags;
            resourceInputs["validTo"] = state?.validTo;
            resourceInputs["wrappingAlgorithm"] = state?.wrappingAlgorithm;
        } else {
            const args = argsOrState as ExternalKeyArgs | undefined;
            if (args?.alias === undefined && !opts.urn) {
                throw new Error("Missing required property 'alias'");
            }
            resourceInputs["alias"] = args?.alias;
            resourceInputs["description"] = args?.description;
            resourceInputs["hsmClusterId"] = args?.hsmClusterId;
            resourceInputs["isArchived"] = args?.isArchived;
            resourceInputs["isEnabled"] = args?.isEnabled;
            resourceInputs["keyMaterialBase64"] = args?.keyMaterialBase64 ? pulumi.secret(args.keyMaterialBase64) : undefined;
            resourceInputs["pendingDeleteWindowInDays"] = args?.pendingDeleteWindowInDays;
            resourceInputs["tags"] = args?.tags;
            resourceInputs["validTo"] = args?.validTo;
            resourceInputs["wrappingAlgorithm"] = args?.wrappingAlgorithm;
            resourceInputs["keyState"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["keyMaterialBase64"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(ExternalKey.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering ExternalKey resources.
 */
export interface ExternalKeyState {
    /**
     * Name of CMK. The name can only contain English letters, numbers, underscore and hyphen '-'. The first character must be a letter or number.
     */
    alias?: pulumi.Input<string>;
    /**
     * Description of CMK. The maximum is 1024 bytes.
     */
    description?: pulumi.Input<string>;
    /**
     * The HSM cluster ID corresponding to KMS Advanced Edition (only valid for KMS Exclusive/Managed Edition service instances).
     */
    hsmClusterId?: pulumi.Input<string>;
    /**
     * Specify whether to archive key. Default value is `false`. This field is conflict with `isEnabled`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    isArchived?: pulumi.Input<boolean>;
    /**
     * Specify whether to enable key. Default value is `false`. This field is conflict with `isArchived`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    isEnabled?: pulumi.Input<boolean>;
    /**
     * The base64-encoded key material encrypted with the public_key. For regions using the national secret version, the length of the imported key material is required to be 128 bits, and for regions using the FIPS version, the length of the imported key material is required to be 256 bits.
     */
    keyMaterialBase64?: pulumi.Input<string>;
    /**
     * State of CMK.
     */
    keyState?: pulumi.Input<string>;
    /**
     * Duration in days after which the key is deleted after destruction of the resource, must be between 7 and 30 days. Defaults to 7 days.
     */
    pendingDeleteWindowInDays?: pulumi.Input<number>;
    /**
     * Tags of CMK.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * This value means the effective timestamp of the key material, 0 means it does not expire. Need to be greater than the current timestamp, the maximum support is 2147443200.
     */
    validTo?: pulumi.Input<number>;
    /**
     * The algorithm for encrypting key material. Available values include `RSAES_PKCS1_V1_5`, `RSAES_OAEP_SHA_1` and `RSAES_OAEP_SHA_256`. Default value is `RSAES_PKCS1_V1_5`.
     */
    wrappingAlgorithm?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a ExternalKey resource.
 */
export interface ExternalKeyArgs {
    /**
     * Name of CMK. The name can only contain English letters, numbers, underscore and hyphen '-'. The first character must be a letter or number.
     */
    alias: pulumi.Input<string>;
    /**
     * Description of CMK. The maximum is 1024 bytes.
     */
    description?: pulumi.Input<string>;
    /**
     * The HSM cluster ID corresponding to KMS Advanced Edition (only valid for KMS Exclusive/Managed Edition service instances).
     */
    hsmClusterId?: pulumi.Input<string>;
    /**
     * Specify whether to archive key. Default value is `false`. This field is conflict with `isEnabled`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    isArchived?: pulumi.Input<boolean>;
    /**
     * Specify whether to enable key. Default value is `false`. This field is conflict with `isArchived`, valid when keyState is `Enabled`, `Disabled`, `Archived`.
     */
    isEnabled?: pulumi.Input<boolean>;
    /**
     * The base64-encoded key material encrypted with the public_key. For regions using the national secret version, the length of the imported key material is required to be 128 bits, and for regions using the FIPS version, the length of the imported key material is required to be 256 bits.
     */
    keyMaterialBase64?: pulumi.Input<string>;
    /**
     * Duration in days after which the key is deleted after destruction of the resource, must be between 7 and 30 days. Defaults to 7 days.
     */
    pendingDeleteWindowInDays?: pulumi.Input<number>;
    /**
     * Tags of CMK.
     */
    tags?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * This value means the effective timestamp of the key material, 0 means it does not expire. Need to be greater than the current timestamp, the maximum support is 2147443200.
     */
    validTo?: pulumi.Input<number>;
    /**
     * The algorithm for encrypting key material. Available values include `RSAES_PKCS1_V1_5`, `RSAES_OAEP_SHA_1` and `RSAES_OAEP_SHA_256`. Default value is `RSAES_PKCS1_V1_5`.
     */
    wrappingAlgorithm?: pulumi.Input<string>;
}
