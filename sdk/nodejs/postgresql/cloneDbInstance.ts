// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * Provides a resource to create a postgresql clone db instance
 *
 * ## Example Usage
 *
 * ### Clone db instance by recoveryTargetTime
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.postgresql.CloneDbInstance("example", {
 *     dbInstanceId: "postgres-evsqpyap",
 *     name: "tf-example-clone",
 *     specCode: "pg.it.medium4",
 *     storage: 200,
 *     period: 1,
 *     autoRenewFlag: 0,
 *     vpcId: "vpc-a6zec4mf",
 *     subnetId: "subnet-b8hintyy",
 *     instanceChargeType: "POSTPAID_BY_HOUR",
 *     securityGroupIds: ["sg-8stavs03"],
 *     projectId: 0,
 *     recoveryTargetTime: "2024-10-12 18:17:00",
 *     dbNodeSets: [
 *         {
 *             role: "Primary",
 *             zone: "ap-guangzhou-6",
 *         },
 *         {
 *             role: "Standby",
 *             zone: "ap-guangzhou-6",
 *         },
 *     ],
 *     tagLists: [{
 *         tagKey: "createBy",
 *         tagValue: "Terraform",
 *     }],
 * });
 * ```
 *
 * ### Clone db instance by backupSetId
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const baseBackups = tencentcloud.Postgresql.getBaseBackups({
 *     filters: [{
 *         name: "db-instance-id",
 *         values: ["postgres-evsqpyap"],
 *     }],
 *     orderBy: "Size",
 *     orderByType: "asc",
 * });
 * const example = new tencentcloud.postgresql.CloneDbInstance("example", {
 *     dbInstanceId: "postgres-evsqpyap",
 *     name: "tf-example-clone",
 *     specCode: "pg.it.medium4",
 *     storage: 200,
 *     period: 1,
 *     autoRenewFlag: 0,
 *     vpcId: "vpc-a6zec4mf",
 *     subnetId: "subnet-b8hintyy",
 *     instanceChargeType: "POSTPAID_BY_HOUR",
 *     securityGroupIds: ["sg-8stavs03"],
 *     projectId: 0,
 *     backupSetId: baseBackups.then(baseBackups => baseBackups.baseBackupSets?.[0]?.id),
 *     dbNodeSets: [
 *         {
 *             role: "Primary",
 *             zone: "ap-guangzhou-6",
 *         },
 *         {
 *             role: "Standby",
 *             zone: "ap-guangzhou-6",
 *         },
 *     ],
 *     tagLists: [{
 *         tagKey: "createBy",
 *         tagValue: "Terraform",
 *     }],
 * });
 * ```
 *
 * ### Clone db instance from CDC
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as tencentcloud from "@tencentcloud_iac/pulumi";
 *
 * const example = new tencentcloud.postgresql.CloneDbInstance("example", {
 *     dbInstanceId: "postgres-evsqpyap",
 *     name: "tf-example-clone",
 *     specCode: "pg.it.medium4",
 *     storage: 200,
 *     period: 1,
 *     autoRenewFlag: 0,
 *     vpcId: "vpc-a6zec4mf",
 *     subnetId: "subnet-b8hintyy",
 *     instanceChargeType: "POSTPAID_BY_HOUR",
 *     securityGroupIds: ["sg-8stavs03"],
 *     projectId: 0,
 *     recoveryTargetTime: "2024-10-12 18:17:00",
 *     dbNodeSets: [
 *         {
 *             role: "Primary",
 *             zone: "ap-guangzhou-6",
 *             dedicatedClusterId: "cluster-262n63e8",
 *         },
 *         {
 *             role: "Standby",
 *             zone: "ap-guangzhou-6",
 *             dedicatedClusterId: "cluster-262n63e8",
 *         },
 *     ],
 *     tagLists: [{
 *         tagKey: "createBy",
 *         tagValue: "Terraform",
 *     }],
 * });
 * ```
 */
export class CloneDbInstance extends pulumi.CustomResource {
    /**
     * Get an existing CloneDbInstance resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: CloneDbInstanceState, opts?: pulumi.CustomResourceOptions): CloneDbInstance {
        return new CloneDbInstance(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'tencentcloud:Postgresql/cloneDbInstance:CloneDbInstance';

    /**
     * Returns true if the given object is an instance of CloneDbInstance.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is CloneDbInstance {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === CloneDbInstance.__pulumiType;
    }

    /**
     * Campaign ID.
     */
    declare public readonly activityId: pulumi.Output<number | undefined>;
    /**
     * Renewal Flag:
     */
    declare public readonly autoRenewFlag: pulumi.Output<number>;
    /**
     * Basic backup set ID.
     */
    declare public readonly backupSetId: pulumi.Output<string | undefined>;
    /**
     * ID of the original instance to be cloned.
     */
    declare public readonly dbInstanceId: pulumi.Output<string>;
    /**
     * Deployment information of the instance node, which will display the information of each AZ when the instance node is deployed across multiple AZs.
     * The information of AZ can be obtained from the `Zone` field in the return value of the [DescribeZones](https://intl.cloud.tencent.com/document/api/409/16769?from_cn_redirect=1) API.
     */
    declare public readonly dbNodeSets: pulumi.Output<outputs.Postgresql.CloneDbInstanceDbNodeSet[] | undefined>;
    /**
     * Instance billing type, which currently supports:
     *
     * - PREPAID: Prepaid, i.e., monthly subscription
     * - POSTPAID_BY_HOUR: Pay-as-you-go, i.e., pay by consumption
     *
     * Default value: PREPAID.
     */
    declare public readonly instanceChargeType: pulumi.Output<string | undefined>;
    /**
     * Name of the newly purchased instance, which can contain up to 60 letters, digits, or symbols (-_). If this parameter is not specified, "Unnamed" will be displayed by default.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * Purchase duration, in months.
     * - Prepaid: Supports `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `10`, `11`, `12`, `24`, and `36`.
     * - Pay-as-you-go: Only supports `1`.
     */
    declare public readonly period: pulumi.Output<number>;
    /**
     * Project ID.
     */
    declare public readonly projectId: pulumi.Output<number | undefined>;
    /**
     * Restoration point in time.
     */
    declare public readonly recoveryTargetTime: pulumi.Output<string | undefined>;
    /**
     * Security group of the instance, which can be obtained from the `sgld` field in the return value of the [DescribeSecurityGroups](https://intl.cloud.tencent.com/document/api/215/15808?from_cn_redirect=1) API. If this parameter is not specified, the default security group will be bound.
     */
    declare public readonly securityGroupIds: pulumi.Output<string[] | undefined>;
    /**
     * Purchasable code, which can be obtained from the `SpecCode` field in the return value of the [DescribeClasses](https://intl.cloud.tencent.com/document/api/409/89019?from_cn_redirect=1) API.
     */
    declare public readonly specCode: pulumi.Output<string>;
    /**
     * Instance storage capacity in GB.
     */
    declare public readonly storage: pulumi.Output<number>;
    /**
     * VPC subnet ID in the format of `subnet-xxxxxxxx`, which can be obtained in the console or from the `unSubnetId` field in the return value of the [DescribeSubnets](https://intl.cloud.tencent.com/document/api/215/15784?from_cn_redirect=1) API.
     */
    declare public readonly subnetId: pulumi.Output<string>;
    /**
     * Primary-standby sync mode, which supports:
     * Semi-sync: Semi-sync
     * Async: Asynchronous
     * Default value for the primary instance: Semi-sync
     * Default value for the read-only instance: Async.
     */
    declare public readonly syncMode: pulumi.Output<string | undefined>;
    /**
     * The information of tags to be bound with the instance, which is left empty by default. This parameter can be obtained from the `Tags` field in the return value of the [DescribeTags](https://intl.cloud.tencent.com/document/api/651/35316?from_cn_redirect=1) API.
     */
    declare public readonly tagLists: pulumi.Output<outputs.Postgresql.CloneDbInstanceTagList[] | undefined>;
    /**
     * VPC ID in the format of `vpc-xxxxxxx`, which can be obtained in the console or from the `unVpcId` field in the return value of the [DescribeVpcEx](https://intl.cloud.tencent.com/document/api/215/1372?from_cn_redirect=1) API.
     */
    declare public readonly vpcId: pulumi.Output<string>;

    /**
     * Create a CloneDbInstance resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: CloneDbInstanceArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: CloneDbInstanceArgs | CloneDbInstanceState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as CloneDbInstanceState | undefined;
            resourceInputs["activityId"] = state?.activityId;
            resourceInputs["autoRenewFlag"] = state?.autoRenewFlag;
            resourceInputs["backupSetId"] = state?.backupSetId;
            resourceInputs["dbInstanceId"] = state?.dbInstanceId;
            resourceInputs["dbNodeSets"] = state?.dbNodeSets;
            resourceInputs["instanceChargeType"] = state?.instanceChargeType;
            resourceInputs["name"] = state?.name;
            resourceInputs["period"] = state?.period;
            resourceInputs["projectId"] = state?.projectId;
            resourceInputs["recoveryTargetTime"] = state?.recoveryTargetTime;
            resourceInputs["securityGroupIds"] = state?.securityGroupIds;
            resourceInputs["specCode"] = state?.specCode;
            resourceInputs["storage"] = state?.storage;
            resourceInputs["subnetId"] = state?.subnetId;
            resourceInputs["syncMode"] = state?.syncMode;
            resourceInputs["tagLists"] = state?.tagLists;
            resourceInputs["vpcId"] = state?.vpcId;
        } else {
            const args = argsOrState as CloneDbInstanceArgs | undefined;
            if (args?.autoRenewFlag === undefined && !opts.urn) {
                throw new Error("Missing required property 'autoRenewFlag'");
            }
            if (args?.dbInstanceId === undefined && !opts.urn) {
                throw new Error("Missing required property 'dbInstanceId'");
            }
            if (args?.period === undefined && !opts.urn) {
                throw new Error("Missing required property 'period'");
            }
            if (args?.specCode === undefined && !opts.urn) {
                throw new Error("Missing required property 'specCode'");
            }
            if (args?.storage === undefined && !opts.urn) {
                throw new Error("Missing required property 'storage'");
            }
            if (args?.subnetId === undefined && !opts.urn) {
                throw new Error("Missing required property 'subnetId'");
            }
            if (args?.vpcId === undefined && !opts.urn) {
                throw new Error("Missing required property 'vpcId'");
            }
            resourceInputs["activityId"] = args?.activityId;
            resourceInputs["autoRenewFlag"] = args?.autoRenewFlag;
            resourceInputs["backupSetId"] = args?.backupSetId;
            resourceInputs["dbInstanceId"] = args?.dbInstanceId;
            resourceInputs["dbNodeSets"] = args?.dbNodeSets;
            resourceInputs["instanceChargeType"] = args?.instanceChargeType;
            resourceInputs["name"] = args?.name;
            resourceInputs["period"] = args?.period;
            resourceInputs["projectId"] = args?.projectId;
            resourceInputs["recoveryTargetTime"] = args?.recoveryTargetTime;
            resourceInputs["securityGroupIds"] = args?.securityGroupIds;
            resourceInputs["specCode"] = args?.specCode;
            resourceInputs["storage"] = args?.storage;
            resourceInputs["subnetId"] = args?.subnetId;
            resourceInputs["syncMode"] = args?.syncMode;
            resourceInputs["tagLists"] = args?.tagLists;
            resourceInputs["vpcId"] = args?.vpcId;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(CloneDbInstance.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering CloneDbInstance resources.
 */
export interface CloneDbInstanceState {
    /**
     * Campaign ID.
     */
    activityId?: pulumi.Input<number>;
    /**
     * Renewal Flag:
     */
    autoRenewFlag?: pulumi.Input<number>;
    /**
     * Basic backup set ID.
     */
    backupSetId?: pulumi.Input<string>;
    /**
     * ID of the original instance to be cloned.
     */
    dbInstanceId?: pulumi.Input<string>;
    /**
     * Deployment information of the instance node, which will display the information of each AZ when the instance node is deployed across multiple AZs.
     * The information of AZ can be obtained from the `Zone` field in the return value of the [DescribeZones](https://intl.cloud.tencent.com/document/api/409/16769?from_cn_redirect=1) API.
     */
    dbNodeSets?: pulumi.Input<pulumi.Input<inputs.Postgresql.CloneDbInstanceDbNodeSet>[]>;
    /**
     * Instance billing type, which currently supports:
     *
     * - PREPAID: Prepaid, i.e., monthly subscription
     * - POSTPAID_BY_HOUR: Pay-as-you-go, i.e., pay by consumption
     *
     * Default value: PREPAID.
     */
    instanceChargeType?: pulumi.Input<string>;
    /**
     * Name of the newly purchased instance, which can contain up to 60 letters, digits, or symbols (-_). If this parameter is not specified, "Unnamed" will be displayed by default.
     */
    name?: pulumi.Input<string>;
    /**
     * Purchase duration, in months.
     * - Prepaid: Supports `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `10`, `11`, `12`, `24`, and `36`.
     * - Pay-as-you-go: Only supports `1`.
     */
    period?: pulumi.Input<number>;
    /**
     * Project ID.
     */
    projectId?: pulumi.Input<number>;
    /**
     * Restoration point in time.
     */
    recoveryTargetTime?: pulumi.Input<string>;
    /**
     * Security group of the instance, which can be obtained from the `sgld` field in the return value of the [DescribeSecurityGroups](https://intl.cloud.tencent.com/document/api/215/15808?from_cn_redirect=1) API. If this parameter is not specified, the default security group will be bound.
     */
    securityGroupIds?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Purchasable code, which can be obtained from the `SpecCode` field in the return value of the [DescribeClasses](https://intl.cloud.tencent.com/document/api/409/89019?from_cn_redirect=1) API.
     */
    specCode?: pulumi.Input<string>;
    /**
     * Instance storage capacity in GB.
     */
    storage?: pulumi.Input<number>;
    /**
     * VPC subnet ID in the format of `subnet-xxxxxxxx`, which can be obtained in the console or from the `unSubnetId` field in the return value of the [DescribeSubnets](https://intl.cloud.tencent.com/document/api/215/15784?from_cn_redirect=1) API.
     */
    subnetId?: pulumi.Input<string>;
    /**
     * Primary-standby sync mode, which supports:
     * Semi-sync: Semi-sync
     * Async: Asynchronous
     * Default value for the primary instance: Semi-sync
     * Default value for the read-only instance: Async.
     */
    syncMode?: pulumi.Input<string>;
    /**
     * The information of tags to be bound with the instance, which is left empty by default. This parameter can be obtained from the `Tags` field in the return value of the [DescribeTags](https://intl.cloud.tencent.com/document/api/651/35316?from_cn_redirect=1) API.
     */
    tagLists?: pulumi.Input<pulumi.Input<inputs.Postgresql.CloneDbInstanceTagList>[]>;
    /**
     * VPC ID in the format of `vpc-xxxxxxx`, which can be obtained in the console or from the `unVpcId` field in the return value of the [DescribeVpcEx](https://intl.cloud.tencent.com/document/api/215/1372?from_cn_redirect=1) API.
     */
    vpcId?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a CloneDbInstance resource.
 */
export interface CloneDbInstanceArgs {
    /**
     * Campaign ID.
     */
    activityId?: pulumi.Input<number>;
    /**
     * Renewal Flag:
     */
    autoRenewFlag: pulumi.Input<number>;
    /**
     * Basic backup set ID.
     */
    backupSetId?: pulumi.Input<string>;
    /**
     * ID of the original instance to be cloned.
     */
    dbInstanceId: pulumi.Input<string>;
    /**
     * Deployment information of the instance node, which will display the information of each AZ when the instance node is deployed across multiple AZs.
     * The information of AZ can be obtained from the `Zone` field in the return value of the [DescribeZones](https://intl.cloud.tencent.com/document/api/409/16769?from_cn_redirect=1) API.
     */
    dbNodeSets?: pulumi.Input<pulumi.Input<inputs.Postgresql.CloneDbInstanceDbNodeSet>[]>;
    /**
     * Instance billing type, which currently supports:
     *
     * - PREPAID: Prepaid, i.e., monthly subscription
     * - POSTPAID_BY_HOUR: Pay-as-you-go, i.e., pay by consumption
     *
     * Default value: PREPAID.
     */
    instanceChargeType?: pulumi.Input<string>;
    /**
     * Name of the newly purchased instance, which can contain up to 60 letters, digits, or symbols (-_). If this parameter is not specified, "Unnamed" will be displayed by default.
     */
    name?: pulumi.Input<string>;
    /**
     * Purchase duration, in months.
     * - Prepaid: Supports `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `10`, `11`, `12`, `24`, and `36`.
     * - Pay-as-you-go: Only supports `1`.
     */
    period: pulumi.Input<number>;
    /**
     * Project ID.
     */
    projectId?: pulumi.Input<number>;
    /**
     * Restoration point in time.
     */
    recoveryTargetTime?: pulumi.Input<string>;
    /**
     * Security group of the instance, which can be obtained from the `sgld` field in the return value of the [DescribeSecurityGroups](https://intl.cloud.tencent.com/document/api/215/15808?from_cn_redirect=1) API. If this parameter is not specified, the default security group will be bound.
     */
    securityGroupIds?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Purchasable code, which can be obtained from the `SpecCode` field in the return value of the [DescribeClasses](https://intl.cloud.tencent.com/document/api/409/89019?from_cn_redirect=1) API.
     */
    specCode: pulumi.Input<string>;
    /**
     * Instance storage capacity in GB.
     */
    storage: pulumi.Input<number>;
    /**
     * VPC subnet ID in the format of `subnet-xxxxxxxx`, which can be obtained in the console or from the `unSubnetId` field in the return value of the [DescribeSubnets](https://intl.cloud.tencent.com/document/api/215/15784?from_cn_redirect=1) API.
     */
    subnetId: pulumi.Input<string>;
    /**
     * Primary-standby sync mode, which supports:
     * Semi-sync: Semi-sync
     * Async: Asynchronous
     * Default value for the primary instance: Semi-sync
     * Default value for the read-only instance: Async.
     */
    syncMode?: pulumi.Input<string>;
    /**
     * The information of tags to be bound with the instance, which is left empty by default. This parameter can be obtained from the `Tags` field in the return value of the [DescribeTags](https://intl.cloud.tencent.com/document/api/651/35316?from_cn_redirect=1) API.
     */
    tagLists?: pulumi.Input<pulumi.Input<inputs.Postgresql.CloneDbInstanceTagList>[]>;
    /**
     * VPC ID in the format of `vpc-xxxxxxx`, which can be obtained in the console or from the `unVpcId` field in the return value of the [DescribeVpcEx](https://intl.cloud.tencent.com/document/api/215/1372?from_cn_redirect=1) API.
     */
    vpcId: pulumi.Input<string>;
}
