// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package mqtt

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/internal"
)

// Provides a resource to create a MQTT authorization policy
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/mqtt"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := mqtt.NewAuthorizationPolicy(ctx, "example", &mqtt.AuthorizationPolicyArgs{
//				InstanceId:    pulumi.String("mqtt-g4qgr3gx"),
//				PolicyName:    pulumi.String("tf-example"),
//				PolicyVersion: pulumi.Int(1),
//				Priority:      pulumi.Int(10),
//				Effect:        pulumi.String("allow"),
//				Actions:       pulumi.String("connect,pub,sub"),
//				Retain:        pulumi.Int(3),
//				Qos:           pulumi.String("0,1,2"),
//				Resources:     pulumi.String("topic-demo"),
//				Username:      pulumi.String("*root*"),
//				ClientId:      pulumi.String("client"),
//				Ip:            pulumi.String("192.168.1.1"),
//				Remark:        pulumi.String("policy remark."),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Or
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/mqtt"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := mqtt.NewAuthorizationPolicy(ctx, "example", &mqtt.AuthorizationPolicyArgs{
//				InstanceId:    pulumi.String("mqtt-g4qgr3gx"),
//				PolicyName:    pulumi.String("tf-example"),
//				PolicyVersion: pulumi.Int(1),
//				Priority:      pulumi.Int(10),
//				Effect:        pulumi.String("deny"),
//				Actions:       pulumi.String("pub,sub"),
//				Retain:        pulumi.Int(3),
//				Qos:           pulumi.String("1,2"),
//				Resources:     pulumi.String("topic-demo"),
//				Username:      pulumi.String("root*"),
//				ClientId:      pulumi.String("*${Username}*"),
//				Ip:            pulumi.String("192.168.1.0/24"),
//				Remark:        pulumi.String("policy remark."),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// MQTT authorization policy can be imported using the id, e.g.
//
// ```sh
// $ pulumi import tencentcloud:Mqtt/authorizationPolicy:AuthorizationPolicy example mqtt-g4qgr3gx#140
// ```
type AuthorizationPolicy struct {
	pulumi.CustomResourceState

	// Operation - connect: connect; pub: publish; sub: subscribe.
	Actions pulumi.StringOutput `pulumi:"actions"`
	// Condition - Client ID, supports regular expressions.
	ClientId pulumi.StringPtrOutput `pulumi:"clientId"`
	// Decision: allow/deny.
	Effect pulumi.StringOutput `pulumi:"effect"`
	// MQTT instance ID.
	InstanceId pulumi.StringOutput `pulumi:"instanceId"`
	// Condition - Client IP address, supports IP or CIDR.
	Ip pulumi.StringPtrOutput `pulumi:"ip"`
	// Authorization policy rule id.
	PolicyId pulumi.IntOutput `pulumi:"policyId"`
	// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
	PolicyName pulumi.StringOutput `pulumi:"policyName"`
	// Policy version, default is 1, currently only 1 is supported.
	PolicyVersion pulumi.IntOutput `pulumi:"policyVersion"`
	// The strategy priority, the smaller the higher the priority, cannot be repeated.
	Priority pulumi.IntOutput `pulumi:"priority"`
	// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
	Qos pulumi.StringOutput `pulumi:"qos"`
	// Remarks, up to 128 characters.
	Remark pulumi.StringPtrOutput `pulumi:"remark"`
	// Resources, requiring matching subscriptions.
	Resources pulumi.StringPtrOutput `pulumi:"resources"`
	// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
	Retain pulumi.IntOutput `pulumi:"retain"`
	// Condition - Username.
	Username pulumi.StringPtrOutput `pulumi:"username"`
}

// NewAuthorizationPolicy registers a new resource with the given unique name, arguments, and options.
func NewAuthorizationPolicy(ctx *pulumi.Context,
	name string, args *AuthorizationPolicyArgs, opts ...pulumi.ResourceOption) (*AuthorizationPolicy, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Actions == nil {
		return nil, errors.New("invalid value for required argument 'Actions'")
	}
	if args.Effect == nil {
		return nil, errors.New("invalid value for required argument 'Effect'")
	}
	if args.InstanceId == nil {
		return nil, errors.New("invalid value for required argument 'InstanceId'")
	}
	if args.PolicyName == nil {
		return nil, errors.New("invalid value for required argument 'PolicyName'")
	}
	if args.PolicyVersion == nil {
		return nil, errors.New("invalid value for required argument 'PolicyVersion'")
	}
	if args.Priority == nil {
		return nil, errors.New("invalid value for required argument 'Priority'")
	}
	if args.Qos == nil {
		return nil, errors.New("invalid value for required argument 'Qos'")
	}
	if args.Retain == nil {
		return nil, errors.New("invalid value for required argument 'Retain'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource AuthorizationPolicy
	err := ctx.RegisterResource("tencentcloud:Mqtt/authorizationPolicy:AuthorizationPolicy", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAuthorizationPolicy gets an existing AuthorizationPolicy resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAuthorizationPolicy(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AuthorizationPolicyState, opts ...pulumi.ResourceOption) (*AuthorizationPolicy, error) {
	var resource AuthorizationPolicy
	err := ctx.ReadResource("tencentcloud:Mqtt/authorizationPolicy:AuthorizationPolicy", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AuthorizationPolicy resources.
type authorizationPolicyState struct {
	// Operation - connect: connect; pub: publish; sub: subscribe.
	Actions *string `pulumi:"actions"`
	// Condition - Client ID, supports regular expressions.
	ClientId *string `pulumi:"clientId"`
	// Decision: allow/deny.
	Effect *string `pulumi:"effect"`
	// MQTT instance ID.
	InstanceId *string `pulumi:"instanceId"`
	// Condition - Client IP address, supports IP or CIDR.
	Ip *string `pulumi:"ip"`
	// Authorization policy rule id.
	PolicyId *int `pulumi:"policyId"`
	// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
	PolicyName *string `pulumi:"policyName"`
	// Policy version, default is 1, currently only 1 is supported.
	PolicyVersion *int `pulumi:"policyVersion"`
	// The strategy priority, the smaller the higher the priority, cannot be repeated.
	Priority *int `pulumi:"priority"`
	// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
	Qos *string `pulumi:"qos"`
	// Remarks, up to 128 characters.
	Remark *string `pulumi:"remark"`
	// Resources, requiring matching subscriptions.
	Resources *string `pulumi:"resources"`
	// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
	Retain *int `pulumi:"retain"`
	// Condition - Username.
	Username *string `pulumi:"username"`
}

type AuthorizationPolicyState struct {
	// Operation - connect: connect; pub: publish; sub: subscribe.
	Actions pulumi.StringPtrInput
	// Condition - Client ID, supports regular expressions.
	ClientId pulumi.StringPtrInput
	// Decision: allow/deny.
	Effect pulumi.StringPtrInput
	// MQTT instance ID.
	InstanceId pulumi.StringPtrInput
	// Condition - Client IP address, supports IP or CIDR.
	Ip pulumi.StringPtrInput
	// Authorization policy rule id.
	PolicyId pulumi.IntPtrInput
	// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
	PolicyName pulumi.StringPtrInput
	// Policy version, default is 1, currently only 1 is supported.
	PolicyVersion pulumi.IntPtrInput
	// The strategy priority, the smaller the higher the priority, cannot be repeated.
	Priority pulumi.IntPtrInput
	// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
	Qos pulumi.StringPtrInput
	// Remarks, up to 128 characters.
	Remark pulumi.StringPtrInput
	// Resources, requiring matching subscriptions.
	Resources pulumi.StringPtrInput
	// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
	Retain pulumi.IntPtrInput
	// Condition - Username.
	Username pulumi.StringPtrInput
}

func (AuthorizationPolicyState) ElementType() reflect.Type {
	return reflect.TypeOf((*authorizationPolicyState)(nil)).Elem()
}

type authorizationPolicyArgs struct {
	// Operation - connect: connect; pub: publish; sub: subscribe.
	Actions string `pulumi:"actions"`
	// Condition - Client ID, supports regular expressions.
	ClientId *string `pulumi:"clientId"`
	// Decision: allow/deny.
	Effect string `pulumi:"effect"`
	// MQTT instance ID.
	InstanceId string `pulumi:"instanceId"`
	// Condition - Client IP address, supports IP or CIDR.
	Ip *string `pulumi:"ip"`
	// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
	PolicyName string `pulumi:"policyName"`
	// Policy version, default is 1, currently only 1 is supported.
	PolicyVersion int `pulumi:"policyVersion"`
	// The strategy priority, the smaller the higher the priority, cannot be repeated.
	Priority int `pulumi:"priority"`
	// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
	Qos string `pulumi:"qos"`
	// Remarks, up to 128 characters.
	Remark *string `pulumi:"remark"`
	// Resources, requiring matching subscriptions.
	Resources *string `pulumi:"resources"`
	// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
	Retain int `pulumi:"retain"`
	// Condition - Username.
	Username *string `pulumi:"username"`
}

// The set of arguments for constructing a AuthorizationPolicy resource.
type AuthorizationPolicyArgs struct {
	// Operation - connect: connect; pub: publish; sub: subscribe.
	Actions pulumi.StringInput
	// Condition - Client ID, supports regular expressions.
	ClientId pulumi.StringPtrInput
	// Decision: allow/deny.
	Effect pulumi.StringInput
	// MQTT instance ID.
	InstanceId pulumi.StringInput
	// Condition - Client IP address, supports IP or CIDR.
	Ip pulumi.StringPtrInput
	// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
	PolicyName pulumi.StringInput
	// Policy version, default is 1, currently only 1 is supported.
	PolicyVersion pulumi.IntInput
	// The strategy priority, the smaller the higher the priority, cannot be repeated.
	Priority pulumi.IntInput
	// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
	Qos pulumi.StringInput
	// Remarks, up to 128 characters.
	Remark pulumi.StringPtrInput
	// Resources, requiring matching subscriptions.
	Resources pulumi.StringPtrInput
	// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
	Retain pulumi.IntInput
	// Condition - Username.
	Username pulumi.StringPtrInput
}

func (AuthorizationPolicyArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*authorizationPolicyArgs)(nil)).Elem()
}

type AuthorizationPolicyInput interface {
	pulumi.Input

	ToAuthorizationPolicyOutput() AuthorizationPolicyOutput
	ToAuthorizationPolicyOutputWithContext(ctx context.Context) AuthorizationPolicyOutput
}

func (*AuthorizationPolicy) ElementType() reflect.Type {
	return reflect.TypeOf((**AuthorizationPolicy)(nil)).Elem()
}

func (i *AuthorizationPolicy) ToAuthorizationPolicyOutput() AuthorizationPolicyOutput {
	return i.ToAuthorizationPolicyOutputWithContext(context.Background())
}

func (i *AuthorizationPolicy) ToAuthorizationPolicyOutputWithContext(ctx context.Context) AuthorizationPolicyOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthorizationPolicyOutput)
}

// AuthorizationPolicyArrayInput is an input type that accepts AuthorizationPolicyArray and AuthorizationPolicyArrayOutput values.
// You can construct a concrete instance of `AuthorizationPolicyArrayInput` via:
//
//	AuthorizationPolicyArray{ AuthorizationPolicyArgs{...} }
type AuthorizationPolicyArrayInput interface {
	pulumi.Input

	ToAuthorizationPolicyArrayOutput() AuthorizationPolicyArrayOutput
	ToAuthorizationPolicyArrayOutputWithContext(context.Context) AuthorizationPolicyArrayOutput
}

type AuthorizationPolicyArray []AuthorizationPolicyInput

func (AuthorizationPolicyArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AuthorizationPolicy)(nil)).Elem()
}

func (i AuthorizationPolicyArray) ToAuthorizationPolicyArrayOutput() AuthorizationPolicyArrayOutput {
	return i.ToAuthorizationPolicyArrayOutputWithContext(context.Background())
}

func (i AuthorizationPolicyArray) ToAuthorizationPolicyArrayOutputWithContext(ctx context.Context) AuthorizationPolicyArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthorizationPolicyArrayOutput)
}

// AuthorizationPolicyMapInput is an input type that accepts AuthorizationPolicyMap and AuthorizationPolicyMapOutput values.
// You can construct a concrete instance of `AuthorizationPolicyMapInput` via:
//
//	AuthorizationPolicyMap{ "key": AuthorizationPolicyArgs{...} }
type AuthorizationPolicyMapInput interface {
	pulumi.Input

	ToAuthorizationPolicyMapOutput() AuthorizationPolicyMapOutput
	ToAuthorizationPolicyMapOutputWithContext(context.Context) AuthorizationPolicyMapOutput
}

type AuthorizationPolicyMap map[string]AuthorizationPolicyInput

func (AuthorizationPolicyMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AuthorizationPolicy)(nil)).Elem()
}

func (i AuthorizationPolicyMap) ToAuthorizationPolicyMapOutput() AuthorizationPolicyMapOutput {
	return i.ToAuthorizationPolicyMapOutputWithContext(context.Background())
}

func (i AuthorizationPolicyMap) ToAuthorizationPolicyMapOutputWithContext(ctx context.Context) AuthorizationPolicyMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AuthorizationPolicyMapOutput)
}

type AuthorizationPolicyOutput struct{ *pulumi.OutputState }

func (AuthorizationPolicyOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AuthorizationPolicy)(nil)).Elem()
}

func (o AuthorizationPolicyOutput) ToAuthorizationPolicyOutput() AuthorizationPolicyOutput {
	return o
}

func (o AuthorizationPolicyOutput) ToAuthorizationPolicyOutputWithContext(ctx context.Context) AuthorizationPolicyOutput {
	return o
}

// Operation - connect: connect; pub: publish; sub: subscribe.
func (o AuthorizationPolicyOutput) Actions() pulumi.StringOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringOutput { return v.Actions }).(pulumi.StringOutput)
}

// Condition - Client ID, supports regular expressions.
func (o AuthorizationPolicyOutput) ClientId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringPtrOutput { return v.ClientId }).(pulumi.StringPtrOutput)
}

// Decision: allow/deny.
func (o AuthorizationPolicyOutput) Effect() pulumi.StringOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringOutput { return v.Effect }).(pulumi.StringOutput)
}

// MQTT instance ID.
func (o AuthorizationPolicyOutput) InstanceId() pulumi.StringOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringOutput { return v.InstanceId }).(pulumi.StringOutput)
}

// Condition - Client IP address, supports IP or CIDR.
func (o AuthorizationPolicyOutput) Ip() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringPtrOutput { return v.Ip }).(pulumi.StringPtrOutput)
}

// Authorization policy rule id.
func (o AuthorizationPolicyOutput) PolicyId() pulumi.IntOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.IntOutput { return v.PolicyId }).(pulumi.IntOutput)
}

// Policy name, cannot be empty, 3-64 characters, supports Chinese characters, letters, numbers, "-" and "_".
func (o AuthorizationPolicyOutput) PolicyName() pulumi.StringOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringOutput { return v.PolicyName }).(pulumi.StringOutput)
}

// Policy version, default is 1, currently only 1 is supported.
func (o AuthorizationPolicyOutput) PolicyVersion() pulumi.IntOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.IntOutput { return v.PolicyVersion }).(pulumi.IntOutput)
}

// The strategy priority, the smaller the higher the priority, cannot be repeated.
func (o AuthorizationPolicyOutput) Priority() pulumi.IntOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.IntOutput { return v.Priority }).(pulumi.IntOutput)
}

// Condition: Quality of Service 0: At most once 1: At least once 2: Exactly once.
func (o AuthorizationPolicyOutput) Qos() pulumi.StringOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringOutput { return v.Qos }).(pulumi.StringOutput)
}

// Remarks, up to 128 characters.
func (o AuthorizationPolicyOutput) Remark() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringPtrOutput { return v.Remark }).(pulumi.StringPtrOutput)
}

// Resources, requiring matching subscriptions.
func (o AuthorizationPolicyOutput) Resources() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringPtrOutput { return v.Resources }).(pulumi.StringPtrOutput)
}

// Condition - Reserved message 1, match reserved message; 2, match unreserved message, 3. match reserved and unreserved message.
func (o AuthorizationPolicyOutput) Retain() pulumi.IntOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.IntOutput { return v.Retain }).(pulumi.IntOutput)
}

// Condition - Username.
func (o AuthorizationPolicyOutput) Username() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AuthorizationPolicy) pulumi.StringPtrOutput { return v.Username }).(pulumi.StringPtrOutput)
}

type AuthorizationPolicyArrayOutput struct{ *pulumi.OutputState }

func (AuthorizationPolicyArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AuthorizationPolicy)(nil)).Elem()
}

func (o AuthorizationPolicyArrayOutput) ToAuthorizationPolicyArrayOutput() AuthorizationPolicyArrayOutput {
	return o
}

func (o AuthorizationPolicyArrayOutput) ToAuthorizationPolicyArrayOutputWithContext(ctx context.Context) AuthorizationPolicyArrayOutput {
	return o
}

func (o AuthorizationPolicyArrayOutput) Index(i pulumi.IntInput) AuthorizationPolicyOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *AuthorizationPolicy {
		return vs[0].([]*AuthorizationPolicy)[vs[1].(int)]
	}).(AuthorizationPolicyOutput)
}

type AuthorizationPolicyMapOutput struct{ *pulumi.OutputState }

func (AuthorizationPolicyMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AuthorizationPolicy)(nil)).Elem()
}

func (o AuthorizationPolicyMapOutput) ToAuthorizationPolicyMapOutput() AuthorizationPolicyMapOutput {
	return o
}

func (o AuthorizationPolicyMapOutput) ToAuthorizationPolicyMapOutputWithContext(ctx context.Context) AuthorizationPolicyMapOutput {
	return o
}

func (o AuthorizationPolicyMapOutput) MapIndex(k pulumi.StringInput) AuthorizationPolicyOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *AuthorizationPolicy {
		return vs[0].(map[string]*AuthorizationPolicy)[vs[1].(string)]
	}).(AuthorizationPolicyOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AuthorizationPolicyInput)(nil)).Elem(), &AuthorizationPolicy{})
	pulumi.RegisterInputType(reflect.TypeOf((*AuthorizationPolicyArrayInput)(nil)).Elem(), AuthorizationPolicyArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AuthorizationPolicyMapInput)(nil)).Elem(), AuthorizationPolicyMap{})
	pulumi.RegisterOutputType(AuthorizationPolicyOutput{})
	pulumi.RegisterOutputType(AuthorizationPolicyArrayOutput{})
	pulumi.RegisterOutputType(AuthorizationPolicyMapOutput{})
}
