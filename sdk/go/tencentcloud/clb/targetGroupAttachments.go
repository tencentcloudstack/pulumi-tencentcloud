// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package clb

import (
	"context"
	"reflect"

	"github.com/pkg/errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a resource to create a clb targetGroupAttachments
//
// This resource supports bidirectional binding (target group binding to the load balancer, load balancer binding to the target group). When choosing either the load balancer or the target group as the binding target, up to 20 combinations can be bound at most.
//
// ## Example Usage
// ### Load balancer binding to the target group
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-tencentcloud/sdk/go/tencentcloud/Clb"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/Clb"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := Clb.NewTargetGroupAttachments(ctx, "targetGroupAttachments", &Clb.TargetGroupAttachmentsArgs{
//				Associations: clb.TargetGroupAttachmentsAssociationArray{
//					&clb.TargetGroupAttachmentsAssociationArgs{
//						ListenerId:    pulumi.String("lbl-m2q6sp9m"),
//						LocationId:    pulumi.String("loc-jjqr0ric"),
//						TargetGroupId: pulumi.String("lbtg-5xunivs0"),
//					},
//				},
//				LoadBalancerId: pulumi.String("lb-phbx2420"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// ### Target group binding to the load balancer
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-tencentcloud/sdk/go/tencentcloud/Clb"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/Clb"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := Clb.NewTargetGroupAttachments(ctx, "targetGroupAttachments", &Clb.TargetGroupAttachmentsArgs{
//				Associations: clb.TargetGroupAttachmentsAssociationArray{
//					&clb.TargetGroupAttachmentsAssociationArgs{
//						ListenerId:     pulumi.String("lbl-m2q6sp9m"),
//						LoadBalancerId: pulumi.String("lb-phbx2420"),
//						LocationId:     pulumi.String("loc-jjqr0ric"),
//					},
//				},
//				TargetGroupId: pulumi.String("lbtg-5xunivs0"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type TargetGroupAttachments struct {
	pulumi.CustomResourceState

	// Association array, the combination cannot exceed 20.
	Associations TargetGroupAttachmentsAssociationArrayOutput `pulumi:"associations"`
	// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
	LoadBalancerId pulumi.StringPtrOutput `pulumi:"loadBalancerId"`
	// Target group ID, (load_balancer_id and targetGroupId require at least one).
	TargetGroupId pulumi.StringPtrOutput `pulumi:"targetGroupId"`
}

// NewTargetGroupAttachments registers a new resource with the given unique name, arguments, and options.
func NewTargetGroupAttachments(ctx *pulumi.Context,
	name string, args *TargetGroupAttachmentsArgs, opts ...pulumi.ResourceOption) (*TargetGroupAttachments, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Associations == nil {
		return nil, errors.New("invalid value for required argument 'Associations'")
	}
	opts = pkgResourceDefaultOpts(opts)
	var resource TargetGroupAttachments
	err := ctx.RegisterResource("tencentcloud:Clb/targetGroupAttachments:TargetGroupAttachments", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetTargetGroupAttachments gets an existing TargetGroupAttachments resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetTargetGroupAttachments(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *TargetGroupAttachmentsState, opts ...pulumi.ResourceOption) (*TargetGroupAttachments, error) {
	var resource TargetGroupAttachments
	err := ctx.ReadResource("tencentcloud:Clb/targetGroupAttachments:TargetGroupAttachments", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering TargetGroupAttachments resources.
type targetGroupAttachmentsState struct {
	// Association array, the combination cannot exceed 20.
	Associations []TargetGroupAttachmentsAssociation `pulumi:"associations"`
	// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
	LoadBalancerId *string `pulumi:"loadBalancerId"`
	// Target group ID, (load_balancer_id and targetGroupId require at least one).
	TargetGroupId *string `pulumi:"targetGroupId"`
}

type TargetGroupAttachmentsState struct {
	// Association array, the combination cannot exceed 20.
	Associations TargetGroupAttachmentsAssociationArrayInput
	// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
	LoadBalancerId pulumi.StringPtrInput
	// Target group ID, (load_balancer_id and targetGroupId require at least one).
	TargetGroupId pulumi.StringPtrInput
}

func (TargetGroupAttachmentsState) ElementType() reflect.Type {
	return reflect.TypeOf((*targetGroupAttachmentsState)(nil)).Elem()
}

type targetGroupAttachmentsArgs struct {
	// Association array, the combination cannot exceed 20.
	Associations []TargetGroupAttachmentsAssociation `pulumi:"associations"`
	// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
	LoadBalancerId *string `pulumi:"loadBalancerId"`
	// Target group ID, (load_balancer_id and targetGroupId require at least one).
	TargetGroupId *string `pulumi:"targetGroupId"`
}

// The set of arguments for constructing a TargetGroupAttachments resource.
type TargetGroupAttachmentsArgs struct {
	// Association array, the combination cannot exceed 20.
	Associations TargetGroupAttachmentsAssociationArrayInput
	// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
	LoadBalancerId pulumi.StringPtrInput
	// Target group ID, (load_balancer_id and targetGroupId require at least one).
	TargetGroupId pulumi.StringPtrInput
}

func (TargetGroupAttachmentsArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*targetGroupAttachmentsArgs)(nil)).Elem()
}

type TargetGroupAttachmentsInput interface {
	pulumi.Input

	ToTargetGroupAttachmentsOutput() TargetGroupAttachmentsOutput
	ToTargetGroupAttachmentsOutputWithContext(ctx context.Context) TargetGroupAttachmentsOutput
}

func (*TargetGroupAttachments) ElementType() reflect.Type {
	return reflect.TypeOf((**TargetGroupAttachments)(nil)).Elem()
}

func (i *TargetGroupAttachments) ToTargetGroupAttachmentsOutput() TargetGroupAttachmentsOutput {
	return i.ToTargetGroupAttachmentsOutputWithContext(context.Background())
}

func (i *TargetGroupAttachments) ToTargetGroupAttachmentsOutputWithContext(ctx context.Context) TargetGroupAttachmentsOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TargetGroupAttachmentsOutput)
}

// TargetGroupAttachmentsArrayInput is an input type that accepts TargetGroupAttachmentsArray and TargetGroupAttachmentsArrayOutput values.
// You can construct a concrete instance of `TargetGroupAttachmentsArrayInput` via:
//
//	TargetGroupAttachmentsArray{ TargetGroupAttachmentsArgs{...} }
type TargetGroupAttachmentsArrayInput interface {
	pulumi.Input

	ToTargetGroupAttachmentsArrayOutput() TargetGroupAttachmentsArrayOutput
	ToTargetGroupAttachmentsArrayOutputWithContext(context.Context) TargetGroupAttachmentsArrayOutput
}

type TargetGroupAttachmentsArray []TargetGroupAttachmentsInput

func (TargetGroupAttachmentsArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*TargetGroupAttachments)(nil)).Elem()
}

func (i TargetGroupAttachmentsArray) ToTargetGroupAttachmentsArrayOutput() TargetGroupAttachmentsArrayOutput {
	return i.ToTargetGroupAttachmentsArrayOutputWithContext(context.Background())
}

func (i TargetGroupAttachmentsArray) ToTargetGroupAttachmentsArrayOutputWithContext(ctx context.Context) TargetGroupAttachmentsArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TargetGroupAttachmentsArrayOutput)
}

// TargetGroupAttachmentsMapInput is an input type that accepts TargetGroupAttachmentsMap and TargetGroupAttachmentsMapOutput values.
// You can construct a concrete instance of `TargetGroupAttachmentsMapInput` via:
//
//	TargetGroupAttachmentsMap{ "key": TargetGroupAttachmentsArgs{...} }
type TargetGroupAttachmentsMapInput interface {
	pulumi.Input

	ToTargetGroupAttachmentsMapOutput() TargetGroupAttachmentsMapOutput
	ToTargetGroupAttachmentsMapOutputWithContext(context.Context) TargetGroupAttachmentsMapOutput
}

type TargetGroupAttachmentsMap map[string]TargetGroupAttachmentsInput

func (TargetGroupAttachmentsMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*TargetGroupAttachments)(nil)).Elem()
}

func (i TargetGroupAttachmentsMap) ToTargetGroupAttachmentsMapOutput() TargetGroupAttachmentsMapOutput {
	return i.ToTargetGroupAttachmentsMapOutputWithContext(context.Background())
}

func (i TargetGroupAttachmentsMap) ToTargetGroupAttachmentsMapOutputWithContext(ctx context.Context) TargetGroupAttachmentsMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TargetGroupAttachmentsMapOutput)
}

type TargetGroupAttachmentsOutput struct{ *pulumi.OutputState }

func (TargetGroupAttachmentsOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**TargetGroupAttachments)(nil)).Elem()
}

func (o TargetGroupAttachmentsOutput) ToTargetGroupAttachmentsOutput() TargetGroupAttachmentsOutput {
	return o
}

func (o TargetGroupAttachmentsOutput) ToTargetGroupAttachmentsOutputWithContext(ctx context.Context) TargetGroupAttachmentsOutput {
	return o
}

// Association array, the combination cannot exceed 20.
func (o TargetGroupAttachmentsOutput) Associations() TargetGroupAttachmentsAssociationArrayOutput {
	return o.ApplyT(func(v *TargetGroupAttachments) TargetGroupAttachmentsAssociationArrayOutput { return v.Associations }).(TargetGroupAttachmentsAssociationArrayOutput)
}

// CLB instance ID, (load_balancer_id and targetGroupId require at least one).
func (o TargetGroupAttachmentsOutput) LoadBalancerId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *TargetGroupAttachments) pulumi.StringPtrOutput { return v.LoadBalancerId }).(pulumi.StringPtrOutput)
}

// Target group ID, (load_balancer_id and targetGroupId require at least one).
func (o TargetGroupAttachmentsOutput) TargetGroupId() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *TargetGroupAttachments) pulumi.StringPtrOutput { return v.TargetGroupId }).(pulumi.StringPtrOutput)
}

type TargetGroupAttachmentsArrayOutput struct{ *pulumi.OutputState }

func (TargetGroupAttachmentsArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*TargetGroupAttachments)(nil)).Elem()
}

func (o TargetGroupAttachmentsArrayOutput) ToTargetGroupAttachmentsArrayOutput() TargetGroupAttachmentsArrayOutput {
	return o
}

func (o TargetGroupAttachmentsArrayOutput) ToTargetGroupAttachmentsArrayOutputWithContext(ctx context.Context) TargetGroupAttachmentsArrayOutput {
	return o
}

func (o TargetGroupAttachmentsArrayOutput) Index(i pulumi.IntInput) TargetGroupAttachmentsOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *TargetGroupAttachments {
		return vs[0].([]*TargetGroupAttachments)[vs[1].(int)]
	}).(TargetGroupAttachmentsOutput)
}

type TargetGroupAttachmentsMapOutput struct{ *pulumi.OutputState }

func (TargetGroupAttachmentsMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*TargetGroupAttachments)(nil)).Elem()
}

func (o TargetGroupAttachmentsMapOutput) ToTargetGroupAttachmentsMapOutput() TargetGroupAttachmentsMapOutput {
	return o
}

func (o TargetGroupAttachmentsMapOutput) ToTargetGroupAttachmentsMapOutputWithContext(ctx context.Context) TargetGroupAttachmentsMapOutput {
	return o
}

func (o TargetGroupAttachmentsMapOutput) MapIndex(k pulumi.StringInput) TargetGroupAttachmentsOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *TargetGroupAttachments {
		return vs[0].(map[string]*TargetGroupAttachments)[vs[1].(string)]
	}).(TargetGroupAttachmentsOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*TargetGroupAttachmentsInput)(nil)).Elem(), &TargetGroupAttachments{})
	pulumi.RegisterInputType(reflect.TypeOf((*TargetGroupAttachmentsArrayInput)(nil)).Elem(), TargetGroupAttachmentsArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*TargetGroupAttachmentsMapInput)(nil)).Elem(), TargetGroupAttachmentsMap{})
	pulumi.RegisterOutputType(TargetGroupAttachmentsOutput{})
	pulumi.RegisterOutputType(TargetGroupAttachmentsArrayOutput{})
	pulumi.RegisterOutputType(TargetGroupAttachmentsMapOutput{})
}
