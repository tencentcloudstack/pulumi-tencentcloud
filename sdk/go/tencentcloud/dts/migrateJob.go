// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package dts

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/internal"
)

// Provides a resource to create a DTS migrate job
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/cynosdb"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/dts"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/mysql"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			example, err := mysql.NewInstance(ctx, "example", &mysql.InstanceArgs{
//				InstanceName:     pulumi.String("tf-example"),
//				InternetService:  pulumi.Int(1),
//				EngineVersion:    pulumi.String("5.7"),
//				ChargeType:       pulumi.String("POSTPAID"),
//				RootPassword:     pulumi.String("PassWord@123"),
//				SlaveDeployMode:  pulumi.Int(0),
//				SlaveSyncMode:    pulumi.Int(1),
//				AvailabilityZone: pulumi.String("ap-guangzhou-7"),
//				MemSize:          pulumi.Int(128000),
//				VolumeSize:       pulumi.Int(250),
//				VpcId:            pulumi.String("vpc-i5yyodl9"),
//				SubnetId:         pulumi.String("subnet-hhi88a58"),
//				IntranetPort:     pulumi.Int(3306),
//				SecurityGroups: pulumi.StringArray{
//					pulumi.String("sg-e6a8xxib"),
//				},
//				Parameters: pulumi.StringMap{
//					"character_set_server": pulumi.String("utf8"),
//					"max_connections":      pulumi.String("1000"),
//				},
//				Tags: pulumi.StringMap{
//					"createBy": pulumi.String("Terraform"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			exampleCluster, err := cynosdb.NewCluster(ctx, "example", &cynosdb.ClusterArgs{
//				ClusterName:               pulumi.String("tf-example"),
//				DbMode:                    pulumi.String("NORMAL"),
//				DbType:                    pulumi.String("MYSQL"),
//				DbVersion:                 pulumi.String("5.7"),
//				Port:                      pulumi.Int(3306),
//				Password:                  pulumi.String("Password@123"),
//				ForceDelete:               pulumi.Bool(true),
//				AvailableZone:             pulumi.String("ap-guangzhou-6"),
//				SlaveZone:                 pulumi.String("ap-guangzhou-7"),
//				VpcId:                     pulumi.String("vpc-i5yyodl9"),
//				SubnetId:                  pulumi.String("subnet-hhi88a58"),
//				InstanceCpuCore:           pulumi.Int(2),
//				InstanceMemorySize:        pulumi.Int(4),
//				InstanceMaintainDuration:  pulumi.Int(7200),
//				InstanceMaintainStartTime: pulumi.Int(3600),
//				InstanceMaintainWeekdays: pulumi.StringArray{
//					pulumi.String("Fri"),
//					pulumi.String("Mon"),
//					pulumi.String("Sat"),
//					pulumi.String("Sun"),
//					pulumi.String("Thu"),
//					pulumi.String("Wed"),
//					pulumi.String("Tue"),
//				},
//				RwGroupSgs: pulumi.StringArray{
//					pulumi.String("sg-e6a8xxib"),
//				},
//				RoGroupSgs: pulumi.StringArray{
//					pulumi.String("sg-e6a8xxib"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			exampleMigrateService, err := dts.NewMigrateService(ctx, "example", &dts.MigrateServiceArgs{
//				SrcDatabaseType: pulumi.String("mysql"),
//				DstDatabaseType: pulumi.String("cynosdbmysql"),
//				SrcRegion:       pulumi.String("ap-guangzhou"),
//				DstRegion:       pulumi.String("ap-guangzhou"),
//				InstanceClass:   pulumi.String("small"),
//				JobName:         pulumi.String("tf-example"),
//				Tags: dts.MigrateServiceTagArray{
//					&dts.MigrateServiceTagArgs{
//						TagKey:   pulumi.String("createBy"),
//						TagValue: pulumi.String("Terraform"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = dts.NewMigrateJob(ctx, "example", &dts.MigrateJobArgs{
//				ServiceId:                 exampleMigrateService.ID(),
//				RunMode:                   pulumi.String("immediate"),
//				AutoRetryTimeRangeMinutes: pulumi.Int(0),
//				MigrateOption: &dts.MigrateJobMigrateOptionArgs{
//					DatabaseTable: &dts.MigrateJobMigrateOptionDatabaseTableArgs{
//						ObjectMode: pulumi.String("partial"),
//						Databases: dts.MigrateJobMigrateOptionDatabaseTableDatabaseArray{
//							&dts.MigrateJobMigrateOptionDatabaseTableDatabaseArgs{
//								DbName:    pulumi.String("db_name"),
//								DbMode:    pulumi.String("partial"),
//								TableMode: pulumi.String("partial"),
//								Tables: dts.MigrateJobMigrateOptionDatabaseTableDatabaseTableArray{
//									&dts.MigrateJobMigrateOptionDatabaseTableDatabaseTableArgs{
//										TableName:     pulumi.String("table_name"),
//										NewTableName:  pulumi.String("new_table_name"),
//										TableEditMode: pulumi.String("rename"),
//									},
//								},
//							},
//						},
//					},
//				},
//				SrcInfo: &dts.MigrateJobSrcInfoArgs{
//					Region:       pulumi.String("ap-guangzhou"),
//					AccessType:   pulumi.String("cdb"),
//					DatabaseType: pulumi.String("mysql"),
//					NodeType:     pulumi.String("simple"),
//					Infos: dts.MigrateJobSrcInfoInfoArray{
//						&dts.MigrateJobSrcInfoInfoArgs{
//							User:       pulumi.String("root"),
//							Password:   pulumi.String("Password@123"),
//							InstanceId: example.ID(),
//						},
//					},
//				},
//				DstInfo: &dts.MigrateJobDstInfoArgs{
//					Region:       pulumi.String("ap-guangzhou"),
//					AccessType:   pulumi.String("cdb"),
//					DatabaseType: pulumi.String("cynosdbmysql"),
//					NodeType:     pulumi.String("simple"),
//					Infos: dts.MigrateJobDstInfoInfoArray{
//						&dts.MigrateJobDstInfoInfoArgs{
//							User:       pulumi.String("root"),
//							Password:   pulumi.String("Password@123"),
//							InstanceId: exampleCluster.ID(),
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// DTS migrate job can be imported using the id, e.g.
//
// ```sh
// $ pulumi import tencentcloud:Dts/migrateJob:MigrateJob example dts-iy98oxba
// ```
type MigrateJob struct {
	pulumi.CustomResourceState

	// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
	AutoRetryTimeRangeMinutes pulumi.IntPtrOutput `pulumi:"autoRetryTimeRangeMinutes"`
	// Target database information.
	DstInfo MigrateJobDstInfoOutput `pulumi:"dstInfo"`
	// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
	ExpectRunTime pulumi.StringOutput `pulumi:"expectRunTime"`
	// Migration job configuration options, used to describe how the task performs migration.
	MigrateOption MigrateJobMigrateOptionOutput `pulumi:"migrateOption"`
	// Running mode. Valid values: immediate, timed.
	RunMode pulumi.StringOutput `pulumi:"runMode"`
	// Migrate service Id from `Dts.MigrateService`.
	ServiceId pulumi.StringOutput `pulumi:"serviceId"`
	// Source instance information.
	SrcInfo MigrateJobSrcInfoOutput `pulumi:"srcInfo"`
	// Task status. Valid values: created(Created), checking (Checking), checkPass (Check passed), checkNotPass (Check not passed), readyRun (Ready for running), running (Running), readyComplete (Preparation completed), success (Successful), failed (Failed), stopping (Stopping), completing (Completing), pausing (Pausing), manualPaused (Paused).
	Status pulumi.StringOutput `pulumi:"status"`
}

// NewMigrateJob registers a new resource with the given unique name, arguments, and options.
func NewMigrateJob(ctx *pulumi.Context,
	name string, args *MigrateJobArgs, opts ...pulumi.ResourceOption) (*MigrateJob, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.DstInfo == nil {
		return nil, errors.New("invalid value for required argument 'DstInfo'")
	}
	if args.MigrateOption == nil {
		return nil, errors.New("invalid value for required argument 'MigrateOption'")
	}
	if args.RunMode == nil {
		return nil, errors.New("invalid value for required argument 'RunMode'")
	}
	if args.ServiceId == nil {
		return nil, errors.New("invalid value for required argument 'ServiceId'")
	}
	if args.SrcInfo == nil {
		return nil, errors.New("invalid value for required argument 'SrcInfo'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource MigrateJob
	err := ctx.RegisterResource("tencentcloud:Dts/migrateJob:MigrateJob", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetMigrateJob gets an existing MigrateJob resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetMigrateJob(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *MigrateJobState, opts ...pulumi.ResourceOption) (*MigrateJob, error) {
	var resource MigrateJob
	err := ctx.ReadResource("tencentcloud:Dts/migrateJob:MigrateJob", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering MigrateJob resources.
type migrateJobState struct {
	// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
	AutoRetryTimeRangeMinutes *int `pulumi:"autoRetryTimeRangeMinutes"`
	// Target database information.
	DstInfo *MigrateJobDstInfo `pulumi:"dstInfo"`
	// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
	ExpectRunTime *string `pulumi:"expectRunTime"`
	// Migration job configuration options, used to describe how the task performs migration.
	MigrateOption *MigrateJobMigrateOption `pulumi:"migrateOption"`
	// Running mode. Valid values: immediate, timed.
	RunMode *string `pulumi:"runMode"`
	// Migrate service Id from `Dts.MigrateService`.
	ServiceId *string `pulumi:"serviceId"`
	// Source instance information.
	SrcInfo *MigrateJobSrcInfo `pulumi:"srcInfo"`
	// Task status. Valid values: created(Created), checking (Checking), checkPass (Check passed), checkNotPass (Check not passed), readyRun (Ready for running), running (Running), readyComplete (Preparation completed), success (Successful), failed (Failed), stopping (Stopping), completing (Completing), pausing (Pausing), manualPaused (Paused).
	Status *string `pulumi:"status"`
}

type MigrateJobState struct {
	// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
	AutoRetryTimeRangeMinutes pulumi.IntPtrInput
	// Target database information.
	DstInfo MigrateJobDstInfoPtrInput
	// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
	ExpectRunTime pulumi.StringPtrInput
	// Migration job configuration options, used to describe how the task performs migration.
	MigrateOption MigrateJobMigrateOptionPtrInput
	// Running mode. Valid values: immediate, timed.
	RunMode pulumi.StringPtrInput
	// Migrate service Id from `Dts.MigrateService`.
	ServiceId pulumi.StringPtrInput
	// Source instance information.
	SrcInfo MigrateJobSrcInfoPtrInput
	// Task status. Valid values: created(Created), checking (Checking), checkPass (Check passed), checkNotPass (Check not passed), readyRun (Ready for running), running (Running), readyComplete (Preparation completed), success (Successful), failed (Failed), stopping (Stopping), completing (Completing), pausing (Pausing), manualPaused (Paused).
	Status pulumi.StringPtrInput
}

func (MigrateJobState) ElementType() reflect.Type {
	return reflect.TypeOf((*migrateJobState)(nil)).Elem()
}

type migrateJobArgs struct {
	// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
	AutoRetryTimeRangeMinutes *int `pulumi:"autoRetryTimeRangeMinutes"`
	// Target database information.
	DstInfo MigrateJobDstInfo `pulumi:"dstInfo"`
	// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
	ExpectRunTime *string `pulumi:"expectRunTime"`
	// Migration job configuration options, used to describe how the task performs migration.
	MigrateOption MigrateJobMigrateOption `pulumi:"migrateOption"`
	// Running mode. Valid values: immediate, timed.
	RunMode string `pulumi:"runMode"`
	// Migrate service Id from `Dts.MigrateService`.
	ServiceId string `pulumi:"serviceId"`
	// Source instance information.
	SrcInfo MigrateJobSrcInfo `pulumi:"srcInfo"`
}

// The set of arguments for constructing a MigrateJob resource.
type MigrateJobArgs struct {
	// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
	AutoRetryTimeRangeMinutes pulumi.IntPtrInput
	// Target database information.
	DstInfo MigrateJobDstInfoInput
	// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
	ExpectRunTime pulumi.StringPtrInput
	// Migration job configuration options, used to describe how the task performs migration.
	MigrateOption MigrateJobMigrateOptionInput
	// Running mode. Valid values: immediate, timed.
	RunMode pulumi.StringInput
	// Migrate service Id from `Dts.MigrateService`.
	ServiceId pulumi.StringInput
	// Source instance information.
	SrcInfo MigrateJobSrcInfoInput
}

func (MigrateJobArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*migrateJobArgs)(nil)).Elem()
}

type MigrateJobInput interface {
	pulumi.Input

	ToMigrateJobOutput() MigrateJobOutput
	ToMigrateJobOutputWithContext(ctx context.Context) MigrateJobOutput
}

func (*MigrateJob) ElementType() reflect.Type {
	return reflect.TypeOf((**MigrateJob)(nil)).Elem()
}

func (i *MigrateJob) ToMigrateJobOutput() MigrateJobOutput {
	return i.ToMigrateJobOutputWithContext(context.Background())
}

func (i *MigrateJob) ToMigrateJobOutputWithContext(ctx context.Context) MigrateJobOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MigrateJobOutput)
}

// MigrateJobArrayInput is an input type that accepts MigrateJobArray and MigrateJobArrayOutput values.
// You can construct a concrete instance of `MigrateJobArrayInput` via:
//
//	MigrateJobArray{ MigrateJobArgs{...} }
type MigrateJobArrayInput interface {
	pulumi.Input

	ToMigrateJobArrayOutput() MigrateJobArrayOutput
	ToMigrateJobArrayOutputWithContext(context.Context) MigrateJobArrayOutput
}

type MigrateJobArray []MigrateJobInput

func (MigrateJobArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*MigrateJob)(nil)).Elem()
}

func (i MigrateJobArray) ToMigrateJobArrayOutput() MigrateJobArrayOutput {
	return i.ToMigrateJobArrayOutputWithContext(context.Background())
}

func (i MigrateJobArray) ToMigrateJobArrayOutputWithContext(ctx context.Context) MigrateJobArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MigrateJobArrayOutput)
}

// MigrateJobMapInput is an input type that accepts MigrateJobMap and MigrateJobMapOutput values.
// You can construct a concrete instance of `MigrateJobMapInput` via:
//
//	MigrateJobMap{ "key": MigrateJobArgs{...} }
type MigrateJobMapInput interface {
	pulumi.Input

	ToMigrateJobMapOutput() MigrateJobMapOutput
	ToMigrateJobMapOutputWithContext(context.Context) MigrateJobMapOutput
}

type MigrateJobMap map[string]MigrateJobInput

func (MigrateJobMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*MigrateJob)(nil)).Elem()
}

func (i MigrateJobMap) ToMigrateJobMapOutput() MigrateJobMapOutput {
	return i.ToMigrateJobMapOutputWithContext(context.Background())
}

func (i MigrateJobMap) ToMigrateJobMapOutputWithContext(ctx context.Context) MigrateJobMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MigrateJobMapOutput)
}

type MigrateJobOutput struct{ *pulumi.OutputState }

func (MigrateJobOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**MigrateJob)(nil)).Elem()
}

func (o MigrateJobOutput) ToMigrateJobOutput() MigrateJobOutput {
	return o
}

func (o MigrateJobOutput) ToMigrateJobOutputWithContext(ctx context.Context) MigrateJobOutput {
	return o
}

// The automatic retry time period can be set from 5 to 720 minutes, with 0 indicating no retry.
func (o MigrateJobOutput) AutoRetryTimeRangeMinutes() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *MigrateJob) pulumi.IntPtrOutput { return v.AutoRetryTimeRangeMinutes }).(pulumi.IntPtrOutput)
}

// Target database information.
func (o MigrateJobOutput) DstInfo() MigrateJobDstInfoOutput {
	return o.ApplyT(func(v *MigrateJob) MigrateJobDstInfoOutput { return v.DstInfo }).(MigrateJobDstInfoOutput)
}

// Expected start time in the format of `2006-01-02 15:04:05`, which is required if RunMode is timed.
func (o MigrateJobOutput) ExpectRunTime() pulumi.StringOutput {
	return o.ApplyT(func(v *MigrateJob) pulumi.StringOutput { return v.ExpectRunTime }).(pulumi.StringOutput)
}

// Migration job configuration options, used to describe how the task performs migration.
func (o MigrateJobOutput) MigrateOption() MigrateJobMigrateOptionOutput {
	return o.ApplyT(func(v *MigrateJob) MigrateJobMigrateOptionOutput { return v.MigrateOption }).(MigrateJobMigrateOptionOutput)
}

// Running mode. Valid values: immediate, timed.
func (o MigrateJobOutput) RunMode() pulumi.StringOutput {
	return o.ApplyT(func(v *MigrateJob) pulumi.StringOutput { return v.RunMode }).(pulumi.StringOutput)
}

// Migrate service Id from `Dts.MigrateService`.
func (o MigrateJobOutput) ServiceId() pulumi.StringOutput {
	return o.ApplyT(func(v *MigrateJob) pulumi.StringOutput { return v.ServiceId }).(pulumi.StringOutput)
}

// Source instance information.
func (o MigrateJobOutput) SrcInfo() MigrateJobSrcInfoOutput {
	return o.ApplyT(func(v *MigrateJob) MigrateJobSrcInfoOutput { return v.SrcInfo }).(MigrateJobSrcInfoOutput)
}

// Task status. Valid values: created(Created), checking (Checking), checkPass (Check passed), checkNotPass (Check not passed), readyRun (Ready for running), running (Running), readyComplete (Preparation completed), success (Successful), failed (Failed), stopping (Stopping), completing (Completing), pausing (Pausing), manualPaused (Paused).
func (o MigrateJobOutput) Status() pulumi.StringOutput {
	return o.ApplyT(func(v *MigrateJob) pulumi.StringOutput { return v.Status }).(pulumi.StringOutput)
}

type MigrateJobArrayOutput struct{ *pulumi.OutputState }

func (MigrateJobArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*MigrateJob)(nil)).Elem()
}

func (o MigrateJobArrayOutput) ToMigrateJobArrayOutput() MigrateJobArrayOutput {
	return o
}

func (o MigrateJobArrayOutput) ToMigrateJobArrayOutputWithContext(ctx context.Context) MigrateJobArrayOutput {
	return o
}

func (o MigrateJobArrayOutput) Index(i pulumi.IntInput) MigrateJobOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *MigrateJob {
		return vs[0].([]*MigrateJob)[vs[1].(int)]
	}).(MigrateJobOutput)
}

type MigrateJobMapOutput struct{ *pulumi.OutputState }

func (MigrateJobMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*MigrateJob)(nil)).Elem()
}

func (o MigrateJobMapOutput) ToMigrateJobMapOutput() MigrateJobMapOutput {
	return o
}

func (o MigrateJobMapOutput) ToMigrateJobMapOutputWithContext(ctx context.Context) MigrateJobMapOutput {
	return o
}

func (o MigrateJobMapOutput) MapIndex(k pulumi.StringInput) MigrateJobOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *MigrateJob {
		return vs[0].(map[string]*MigrateJob)[vs[1].(string)]
	}).(MigrateJobOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*MigrateJobInput)(nil)).Elem(), &MigrateJob{})
	pulumi.RegisterInputType(reflect.TypeOf((*MigrateJobArrayInput)(nil)).Elem(), MigrateJobArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*MigrateJobMapInput)(nil)).Elem(), MigrateJobMap{})
	pulumi.RegisterOutputType(MigrateJobOutput{})
	pulumi.RegisterOutputType(MigrateJobArrayOutput{})
	pulumi.RegisterOutputType(MigrateJobMapOutput{})
}
