// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package cls

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/internal"
)

// Provides a resource to create a cls alarm
//
// ## Example Usage
//
// ### Use single condition
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/cls"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := cls.NewAlarm(ctx, "example", &cls.AlarmArgs{
//				Name: pulumi.String("tf-example"),
//				AlarmNoticeIds: pulumi.StringArray{
//					pulumi.String("notice-c2af43ee-1a4b-4c4a-ae3e-f81481280101"),
//				},
//				AlarmPeriod:     pulumi.Int(15),
//				Condition:       pulumi.String("$1.source='10.0.0.1'"),
//				AlarmLevel:      pulumi.Int(1),
//				MessageTemplate: pulumi.String("{{.Label}}"),
//				Status:          pulumi.Bool(true),
//				TriggerCount:    pulumi.Int(1),
//				AlarmTargets: cls.AlarmAlarmTargetArray{
//					&cls.AlarmAlarmTargetArgs{
//						LogsetId:        pulumi.String("e74efb8e-f647-48b2-a725-43f11b122081"),
//						TopicId:         pulumi.String("59cf3ec0-1612-4157-be3f-341b2e7a53cb"),
//						Query:           pulumi.String("status:>500 | select count(*) as errorCounts"),
//						StartTimeOffset: pulumi.Int(-15),
//						EndTimeOffset:   pulumi.Int(0),
//						Number:          pulumi.Int(1),
//						SyntaxRule:      pulumi.Int(1),
//					},
//				},
//				Analyses: cls.AlarmAnalysisArray{
//					&cls.AlarmAnalysisArgs{
//						Content: pulumi.String("__FILENAME__"),
//						Name:    pulumi.String("terraform"),
//						Type:    pulumi.String("field"),
//						ConfigInfos: cls.AlarmAnalysisConfigInfoArray{
//							&cls.AlarmAnalysisConfigInfoArgs{
//								Key:   pulumi.String("QueryIndex"),
//								Value: pulumi.String("1"),
//							},
//						},
//					},
//				},
//				MonitorTime: &cls.AlarmMonitorTimeArgs{
//					Time: pulumi.Int(1),
//					Type: pulumi.String("Period"),
//				},
//				Tags: pulumi.StringMap{
//					"createdBy": pulumi.String("terraform"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### Use multi conditions
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/tencentcloudstack/pulumi-tencentcloud/sdk/go/tencentcloud/cls"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := cls.NewAlarm(ctx, "example", &cls.AlarmArgs{
//				Name: pulumi.String("tf-example"),
//				AlarmNoticeIds: pulumi.StringArray{
//					pulumi.String("notice-c2af43ee-1a4b-4c4a-ae3e-f81481280101"),
//				},
//				AlarmPeriod:     pulumi.Int(15),
//				MessageTemplate: pulumi.String("{{.Label}}"),
//				Status:          pulumi.Bool(true),
//				TriggerCount:    pulumi.Int(1),
//				AlarmTargets: cls.AlarmAlarmTargetArray{
//					&cls.AlarmAlarmTargetArgs{
//						LogsetId:        pulumi.String("e74efb8e-f647-48b2-a725-43f11b122081"),
//						TopicId:         pulumi.String("59cf3ec0-1612-4157-be3f-341b2e7a53cb"),
//						Query:           pulumi.String("status:>500 | select count(*) as errorCounts"),
//						StartTimeOffset: pulumi.Int(-15),
//						EndTimeOffset:   pulumi.Int(0),
//						Number:          pulumi.Int(1),
//						SyntaxRule:      pulumi.Int(1),
//					},
//				},
//				Analyses: cls.AlarmAnalysisArray{
//					&cls.AlarmAnalysisArgs{
//						Content: pulumi.String("__FILENAME__"),
//						Name:    pulumi.String("terraform"),
//						Type:    pulumi.String("field"),
//						ConfigInfos: cls.AlarmAnalysisConfigInfoArray{
//							&cls.AlarmAnalysisConfigInfoArgs{
//								Key:   pulumi.String("QueryIndex"),
//								Value: pulumi.String("1"),
//							},
//						},
//					},
//				},
//				MultiConditions: cls.AlarmMultiConditionArray{
//					&cls.AlarmMultiConditionArgs{
//						Condition:  pulumi.String("[$1.__QUERYCOUNT__]> 0"),
//						AlarmLevel: pulumi.Int(1),
//					},
//					&cls.AlarmMultiConditionArgs{
//						Condition:  pulumi.String("$1.source='10.0.0.1'"),
//						AlarmLevel: pulumi.Int(2),
//					},
//				},
//				MonitorTime: &cls.AlarmMonitorTimeArgs{
//					Time: pulumi.Int(1),
//					Type: pulumi.String("Period"),
//				},
//				Tags: pulumi.StringMap{
//					"createdBy": pulumi.String("terraform"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// cls alarm can be imported using the id, e.g.
//
// ```sh
// $ pulumi import tencentcloud:Cls/alarm:Alarm example alarm-d8529662-e10f-440c-ba80-50f3dcf215a3
// ```
type Alarm struct {
	pulumi.CustomResourceState

	// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
	AlarmLevel pulumi.IntOutput `pulumi:"alarmLevel"`
	// list of alarm notice id.
	AlarmNoticeIds pulumi.StringArrayOutput `pulumi:"alarmNoticeIds"`
	// alarm repeat cycle.
	AlarmPeriod pulumi.IntOutput `pulumi:"alarmPeriod"`
	// list of alarm target.
	AlarmTargets AlarmAlarmTargetArrayOutput `pulumi:"alarmTargets"`
	// multidimensional analysis.
	Analyses AlarmAnalysisArrayOutput `pulumi:"analyses"`
	// user define callback.
	CallBack AlarmCallBackOutput `pulumi:"callBack"`
	// Trigger condition.
	Condition pulumi.StringPtrOutput `pulumi:"condition"`
	// user define alarm notice.
	MessageTemplate pulumi.StringPtrOutput `pulumi:"messageTemplate"`
	// monitor task execution time.
	MonitorTime AlarmMonitorTimeOutput `pulumi:"monitorTime"`
	// Multiple triggering conditions.
	MultiConditions AlarmMultiConditionArrayOutput `pulumi:"multiConditions"`
	// log alarm name.
	Name pulumi.StringOutput `pulumi:"name"`
	// whether to enable the alarm policy.
	Status pulumi.BoolOutput `pulumi:"status"`
	// Tag description list.
	Tags pulumi.StringMapOutput `pulumi:"tags"`
	// continuous cycle.
	TriggerCount pulumi.IntOutput `pulumi:"triggerCount"`
}

// NewAlarm registers a new resource with the given unique name, arguments, and options.
func NewAlarm(ctx *pulumi.Context,
	name string, args *AlarmArgs, opts ...pulumi.ResourceOption) (*Alarm, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AlarmNoticeIds == nil {
		return nil, errors.New("invalid value for required argument 'AlarmNoticeIds'")
	}
	if args.AlarmPeriod == nil {
		return nil, errors.New("invalid value for required argument 'AlarmPeriod'")
	}
	if args.AlarmTargets == nil {
		return nil, errors.New("invalid value for required argument 'AlarmTargets'")
	}
	if args.MonitorTime == nil {
		return nil, errors.New("invalid value for required argument 'MonitorTime'")
	}
	if args.TriggerCount == nil {
		return nil, errors.New("invalid value for required argument 'TriggerCount'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Alarm
	err := ctx.RegisterResource("tencentcloud:Cls/alarm:Alarm", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAlarm gets an existing Alarm resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAlarm(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AlarmState, opts ...pulumi.ResourceOption) (*Alarm, error) {
	var resource Alarm
	err := ctx.ReadResource("tencentcloud:Cls/alarm:Alarm", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Alarm resources.
type alarmState struct {
	// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
	AlarmLevel *int `pulumi:"alarmLevel"`
	// list of alarm notice id.
	AlarmNoticeIds []string `pulumi:"alarmNoticeIds"`
	// alarm repeat cycle.
	AlarmPeriod *int `pulumi:"alarmPeriod"`
	// list of alarm target.
	AlarmTargets []AlarmAlarmTarget `pulumi:"alarmTargets"`
	// multidimensional analysis.
	Analyses []AlarmAnalysis `pulumi:"analyses"`
	// user define callback.
	CallBack *AlarmCallBack `pulumi:"callBack"`
	// Trigger condition.
	Condition *string `pulumi:"condition"`
	// user define alarm notice.
	MessageTemplate *string `pulumi:"messageTemplate"`
	// monitor task execution time.
	MonitorTime *AlarmMonitorTime `pulumi:"monitorTime"`
	// Multiple triggering conditions.
	MultiConditions []AlarmMultiCondition `pulumi:"multiConditions"`
	// log alarm name.
	Name *string `pulumi:"name"`
	// whether to enable the alarm policy.
	Status *bool `pulumi:"status"`
	// Tag description list.
	Tags map[string]string `pulumi:"tags"`
	// continuous cycle.
	TriggerCount *int `pulumi:"triggerCount"`
}

type AlarmState struct {
	// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
	AlarmLevel pulumi.IntPtrInput
	// list of alarm notice id.
	AlarmNoticeIds pulumi.StringArrayInput
	// alarm repeat cycle.
	AlarmPeriod pulumi.IntPtrInput
	// list of alarm target.
	AlarmTargets AlarmAlarmTargetArrayInput
	// multidimensional analysis.
	Analyses AlarmAnalysisArrayInput
	// user define callback.
	CallBack AlarmCallBackPtrInput
	// Trigger condition.
	Condition pulumi.StringPtrInput
	// user define alarm notice.
	MessageTemplate pulumi.StringPtrInput
	// monitor task execution time.
	MonitorTime AlarmMonitorTimePtrInput
	// Multiple triggering conditions.
	MultiConditions AlarmMultiConditionArrayInput
	// log alarm name.
	Name pulumi.StringPtrInput
	// whether to enable the alarm policy.
	Status pulumi.BoolPtrInput
	// Tag description list.
	Tags pulumi.StringMapInput
	// continuous cycle.
	TriggerCount pulumi.IntPtrInput
}

func (AlarmState) ElementType() reflect.Type {
	return reflect.TypeOf((*alarmState)(nil)).Elem()
}

type alarmArgs struct {
	// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
	AlarmLevel *int `pulumi:"alarmLevel"`
	// list of alarm notice id.
	AlarmNoticeIds []string `pulumi:"alarmNoticeIds"`
	// alarm repeat cycle.
	AlarmPeriod int `pulumi:"alarmPeriod"`
	// list of alarm target.
	AlarmTargets []AlarmAlarmTarget `pulumi:"alarmTargets"`
	// multidimensional analysis.
	Analyses []AlarmAnalysis `pulumi:"analyses"`
	// user define callback.
	CallBack *AlarmCallBack `pulumi:"callBack"`
	// Trigger condition.
	Condition *string `pulumi:"condition"`
	// user define alarm notice.
	MessageTemplate *string `pulumi:"messageTemplate"`
	// monitor task execution time.
	MonitorTime AlarmMonitorTime `pulumi:"monitorTime"`
	// Multiple triggering conditions.
	MultiConditions []AlarmMultiCondition `pulumi:"multiConditions"`
	// log alarm name.
	Name *string `pulumi:"name"`
	// whether to enable the alarm policy.
	Status *bool `pulumi:"status"`
	// Tag description list.
	Tags map[string]string `pulumi:"tags"`
	// continuous cycle.
	TriggerCount int `pulumi:"triggerCount"`
}

// The set of arguments for constructing a Alarm resource.
type AlarmArgs struct {
	// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
	AlarmLevel pulumi.IntPtrInput
	// list of alarm notice id.
	AlarmNoticeIds pulumi.StringArrayInput
	// alarm repeat cycle.
	AlarmPeriod pulumi.IntInput
	// list of alarm target.
	AlarmTargets AlarmAlarmTargetArrayInput
	// multidimensional analysis.
	Analyses AlarmAnalysisArrayInput
	// user define callback.
	CallBack AlarmCallBackPtrInput
	// Trigger condition.
	Condition pulumi.StringPtrInput
	// user define alarm notice.
	MessageTemplate pulumi.StringPtrInput
	// monitor task execution time.
	MonitorTime AlarmMonitorTimeInput
	// Multiple triggering conditions.
	MultiConditions AlarmMultiConditionArrayInput
	// log alarm name.
	Name pulumi.StringPtrInput
	// whether to enable the alarm policy.
	Status pulumi.BoolPtrInput
	// Tag description list.
	Tags pulumi.StringMapInput
	// continuous cycle.
	TriggerCount pulumi.IntInput
}

func (AlarmArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*alarmArgs)(nil)).Elem()
}

type AlarmInput interface {
	pulumi.Input

	ToAlarmOutput() AlarmOutput
	ToAlarmOutputWithContext(ctx context.Context) AlarmOutput
}

func (*Alarm) ElementType() reflect.Type {
	return reflect.TypeOf((**Alarm)(nil)).Elem()
}

func (i *Alarm) ToAlarmOutput() AlarmOutput {
	return i.ToAlarmOutputWithContext(context.Background())
}

func (i *Alarm) ToAlarmOutputWithContext(ctx context.Context) AlarmOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlarmOutput)
}

// AlarmArrayInput is an input type that accepts AlarmArray and AlarmArrayOutput values.
// You can construct a concrete instance of `AlarmArrayInput` via:
//
//	AlarmArray{ AlarmArgs{...} }
type AlarmArrayInput interface {
	pulumi.Input

	ToAlarmArrayOutput() AlarmArrayOutput
	ToAlarmArrayOutputWithContext(context.Context) AlarmArrayOutput
}

type AlarmArray []AlarmInput

func (AlarmArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Alarm)(nil)).Elem()
}

func (i AlarmArray) ToAlarmArrayOutput() AlarmArrayOutput {
	return i.ToAlarmArrayOutputWithContext(context.Background())
}

func (i AlarmArray) ToAlarmArrayOutputWithContext(ctx context.Context) AlarmArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlarmArrayOutput)
}

// AlarmMapInput is an input type that accepts AlarmMap and AlarmMapOutput values.
// You can construct a concrete instance of `AlarmMapInput` via:
//
//	AlarmMap{ "key": AlarmArgs{...} }
type AlarmMapInput interface {
	pulumi.Input

	ToAlarmMapOutput() AlarmMapOutput
	ToAlarmMapOutputWithContext(context.Context) AlarmMapOutput
}

type AlarmMap map[string]AlarmInput

func (AlarmMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Alarm)(nil)).Elem()
}

func (i AlarmMap) ToAlarmMapOutput() AlarmMapOutput {
	return i.ToAlarmMapOutputWithContext(context.Background())
}

func (i AlarmMap) ToAlarmMapOutputWithContext(ctx context.Context) AlarmMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlarmMapOutput)
}

type AlarmOutput struct{ *pulumi.OutputState }

func (AlarmOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Alarm)(nil)).Elem()
}

func (o AlarmOutput) ToAlarmOutput() AlarmOutput {
	return o
}

func (o AlarmOutput) ToAlarmOutputWithContext(ctx context.Context) AlarmOutput {
	return o
}

// Alarm level. 0: Warning; 1: Info; 2: Critical. Default is 0.
func (o AlarmOutput) AlarmLevel() pulumi.IntOutput {
	return o.ApplyT(func(v *Alarm) pulumi.IntOutput { return v.AlarmLevel }).(pulumi.IntOutput)
}

// list of alarm notice id.
func (o AlarmOutput) AlarmNoticeIds() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *Alarm) pulumi.StringArrayOutput { return v.AlarmNoticeIds }).(pulumi.StringArrayOutput)
}

// alarm repeat cycle.
func (o AlarmOutput) AlarmPeriod() pulumi.IntOutput {
	return o.ApplyT(func(v *Alarm) pulumi.IntOutput { return v.AlarmPeriod }).(pulumi.IntOutput)
}

// list of alarm target.
func (o AlarmOutput) AlarmTargets() AlarmAlarmTargetArrayOutput {
	return o.ApplyT(func(v *Alarm) AlarmAlarmTargetArrayOutput { return v.AlarmTargets }).(AlarmAlarmTargetArrayOutput)
}

// multidimensional analysis.
func (o AlarmOutput) Analyses() AlarmAnalysisArrayOutput {
	return o.ApplyT(func(v *Alarm) AlarmAnalysisArrayOutput { return v.Analyses }).(AlarmAnalysisArrayOutput)
}

// user define callback.
func (o AlarmOutput) CallBack() AlarmCallBackOutput {
	return o.ApplyT(func(v *Alarm) AlarmCallBackOutput { return v.CallBack }).(AlarmCallBackOutput)
}

// Trigger condition.
func (o AlarmOutput) Condition() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Alarm) pulumi.StringPtrOutput { return v.Condition }).(pulumi.StringPtrOutput)
}

// user define alarm notice.
func (o AlarmOutput) MessageTemplate() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Alarm) pulumi.StringPtrOutput { return v.MessageTemplate }).(pulumi.StringPtrOutput)
}

// monitor task execution time.
func (o AlarmOutput) MonitorTime() AlarmMonitorTimeOutput {
	return o.ApplyT(func(v *Alarm) AlarmMonitorTimeOutput { return v.MonitorTime }).(AlarmMonitorTimeOutput)
}

// Multiple triggering conditions.
func (o AlarmOutput) MultiConditions() AlarmMultiConditionArrayOutput {
	return o.ApplyT(func(v *Alarm) AlarmMultiConditionArrayOutput { return v.MultiConditions }).(AlarmMultiConditionArrayOutput)
}

// log alarm name.
func (o AlarmOutput) Name() pulumi.StringOutput {
	return o.ApplyT(func(v *Alarm) pulumi.StringOutput { return v.Name }).(pulumi.StringOutput)
}

// whether to enable the alarm policy.
func (o AlarmOutput) Status() pulumi.BoolOutput {
	return o.ApplyT(func(v *Alarm) pulumi.BoolOutput { return v.Status }).(pulumi.BoolOutput)
}

// Tag description list.
func (o AlarmOutput) Tags() pulumi.StringMapOutput {
	return o.ApplyT(func(v *Alarm) pulumi.StringMapOutput { return v.Tags }).(pulumi.StringMapOutput)
}

// continuous cycle.
func (o AlarmOutput) TriggerCount() pulumi.IntOutput {
	return o.ApplyT(func(v *Alarm) pulumi.IntOutput { return v.TriggerCount }).(pulumi.IntOutput)
}

type AlarmArrayOutput struct{ *pulumi.OutputState }

func (AlarmArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Alarm)(nil)).Elem()
}

func (o AlarmArrayOutput) ToAlarmArrayOutput() AlarmArrayOutput {
	return o
}

func (o AlarmArrayOutput) ToAlarmArrayOutputWithContext(ctx context.Context) AlarmArrayOutput {
	return o
}

func (o AlarmArrayOutput) Index(i pulumi.IntInput) AlarmOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Alarm {
		return vs[0].([]*Alarm)[vs[1].(int)]
	}).(AlarmOutput)
}

type AlarmMapOutput struct{ *pulumi.OutputState }

func (AlarmMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Alarm)(nil)).Elem()
}

func (o AlarmMapOutput) ToAlarmMapOutput() AlarmMapOutput {
	return o
}

func (o AlarmMapOutput) ToAlarmMapOutputWithContext(ctx context.Context) AlarmMapOutput {
	return o
}

func (o AlarmMapOutput) MapIndex(k pulumi.StringInput) AlarmOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Alarm {
		return vs[0].(map[string]*Alarm)[vs[1].(string)]
	}).(AlarmOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AlarmInput)(nil)).Elem(), &Alarm{})
	pulumi.RegisterInputType(reflect.TypeOf((*AlarmArrayInput)(nil)).Elem(), AlarmArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AlarmMapInput)(nil)).Elem(), AlarmMap{})
	pulumi.RegisterOutputType(AlarmOutput{})
	pulumi.RegisterOutputType(AlarmArrayOutput{})
	pulumi.RegisterOutputType(AlarmMapOutput{})
}
